#!/bin/bash

FORM_TITLE="Тестовая форма про шум в ушах"

# Описываем вопросы как многострочную строку
read -r -d '' QUESTIONS << EOM
Я боюсь того, что шум в ушах никогда не пройдет
Я чувствую, что больше не могу его терпеть
Я думаю, что мне никогда не станет лучше
Я испытываю отчаяние из-за шума в ушах и чувствую, как оно переполняет меня
Я больше не могу выносить шум в ушах
Я боюсь, что шум в ушах станет еще сильнее
Я часто вспоминаю ситуации, когда шум в ушах был сильнее, чем сейчас, и боюсь, что это снова повторится
Я очень сильно хочу, чтобы шум в ушах полностью прошел
Я не могу перестать о нем думать
Я постоянно думаю о том, насколько сильно у меня шумит в ушах
Я постоянно думаю о том, как сильно я хочу, чтобы шум в ушах прекратился
Я ничего не могу сделать для того, чтобы шум в ушах уменьшился
Я думаю о том, может ли случиться что-нибудь плохое
EOM

# Опции ответов
OPTIONS="совсем нет (0), в небольшой степени (1), в некоторой степени (2), в значительной степени (3), всегда (4)"

# Генерация Python скрипта
python manage.py shell <<EOF
from forms.models import Form, FormField

form, _ = Form.objects.get_or_create(title="$FORM_TITLE")

questions = """$QUESTIONS""".strip().split("\\n")

for order, text in enumerate(questions):
    FormField.objects.create(
        form=form,
        label=text.strip(),
        field_type='radio',
        required=True,
        options="$OPTIONS",
        order=order
    )

print("✅ Форма '$FORM_TITLE' и ${#questions[@]} полей успешно созданы.")
EOF
