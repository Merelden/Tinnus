(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{2088:(e,a,l)=>{Promise.resolve().then(l.bind(l,4712))},4712:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>p});var s=l(5155),t=l(6874),n=l.n(t),r=l(8652),i=l(879),u=l(7476),o=l(2115),d=l(6610),h=l(2257),m=l(5695);function p(){let[e,a]=(0,o.useState)(""),[l,t]=(0,o.useState)(""),[p,c]=(0,o.useState)(""),[g,f]=(0,o.useState)(""),[w,j]=(0,o.useState)(""),[x,b]=(0,o.useState)(null),v=(0,m.useRouter)();(0,o.useEffect)(()=>{(async()=>{200===(await h.A.isAuth()).status&&v.push("/tests")})()},[]);let A=async a=>{a.preventDefault(),b(null);try{await h.A.csrf();let a=await h.A.register({user:{email:g,password:w},full_name:e,age:l,phone:p});if(400===a.status){let e=a.data;b({email:e.user.email?e.user.email[0]:"",full_name:e.full_name?e.full_name[0]:"",age:e.age?e.age[0]:"",phone:e.phone?e.phone[0]:"",password:e.user.password?e.user.password[0]:"",detail:e.detail?e.detail:""}),console.log(e)}if(201===a.status){let e=await h.A.login({email:g,password:w});200===e.status&&(window.location.href="/start")}}catch(e){console.error(e)}};return(0,s.jsx)(i.Ym,{children:(0,s.jsxs)(r.A,{children:[(0,s.jsx)("h2",{children:"Регистрация"}),(0,s.jsxs)("p",{className:"description-mini",children:["Пожалуйста, заполните форму для создания аккаунта.",(0,s.jsx)("br",{}),"Если у вас есть аккаунт, ",(0,s.jsx)(n(),{href:"/login",children:"войдите"}),"."]}),(0,s.jsxs)(i.T7,{onSubmit:A,children:[(0,s.jsx)(u.A,{image:"user",label:"ФИО",value:e,error:null==x?void 0:x.full_name,onChange:a}),(0,s.jsx)(u.A,{image:"calendar",label:"Возраст",value:l,type:"number",error:null==x?void 0:x.age,onChange:t}),(0,s.jsx)(u.A,{image:"phone",label:"Номер телефона",value:p,type:"tel",error:null==x?void 0:x.phone,onChange:c}),(0,s.jsx)(u.A,{image:"mail",label:"Email",value:g,type:"email",error:null==x?void 0:x.email,onChange:f}),(0,s.jsx)(u.A,{image:"lock",label:"Пароль",value:w,type:"password",error:null==x?void 0:x.password,onChange:j}),(0,s.jsx)("button",{type:"submit",children:"Зарегистрироваться"})]}),(0,s.jsx)(d.A,{})]})})}}},e=>{e.O(0,[129,987,464,766,874,410,990,441,964,358],()=>e(e.s=2088)),_N_E=e.O()}]);