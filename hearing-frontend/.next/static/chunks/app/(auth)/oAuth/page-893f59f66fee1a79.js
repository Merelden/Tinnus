(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{412:(e,t,n)=>{"use strict";n.d(t,{Bs:()=>o,XK:()=>p,Zf:()=>l,eq:()=>a,hk:()=>s,tb:()=>r,vz:()=>i});let a="#157AFE",i="#fff",r="#F5F7F9",o="#EFEFEF",s="#84868A",l="#333",p="#FF6F61"},879:(e,t,n)=>{"use strict";n.d(t,{$G:()=>s,I4:()=>l,T7:()=>o,Ym:()=>r});var a=n(4987),i=n(412);let r=a.Ay.section.withConfig({displayName:"page.styled__BackgroundPage",componentId:"sc-6a43832-0"})(["min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;padding:24px;z-index:10;.content{animation:fadeInUp 400ms ease-out both;}@keyframes fadeInUp{from{opacity:0;transform:translateY(16px) scale(0.9);}to{opacity:1;transform:translateY(0) scale(1);}}@media (max-width:500px){padding:0;}}"]),o=a.Ay.form.withConfig({displayName:"page.styled__AuthForm",componentId:"sc-6a43832-1"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;gap:14px;margin:24px 0;z-index:20;width:100%;button{margin-top:28px;background-color:",";font-size:24px;font-family:var(--font-manrope),serif;color:",";height:50px;border-radius:6px;width:100%;}@media (max-width:500px){margin:12px 0;button{height:45px;font-size:20px;margin-top:14px;}}"],i.eq,i.vz),s=a.Ay.div.withConfig({displayName:"page.styled__ContentBlock",componentId:"sc-6a43832-2"})(["position:relative;"]),l=a.Ay.div.withConfig({displayName:"page.styled__OtherErrors",componentId:"sc-6a43832-3"})(["position:absolute;top:0;right:0;width:100%;height:",";opacity:",";background-color:",";border-radius:25px;z-index:1;transition:.4s;display:flex;justify-content:center;align-items:end;padding:4.5%;font-family:var(--font-manrope),serif;font-weight:500;font-size:24px;color:",";@media (max-width:500px){font-size:20px;height:",";padding:3.2%;}@media (max-width:400px){padding:3.2%;}@media (max-width:320px){padding:4%;}"],e=>{let{$message:t}=e;return t?"114%":"100%"},e=>{let{$message:t}=e;return+!!t},i.XK,i.vz,e=>{let{$message:t}=e;return t?"112%":"100%"})},2257:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(3464),i=n(9509);a.A.defaults.withCredentials=!0,a.A.defaults.xsrfCookieName="csrftoken",a.A.defaults.xsrfHeaderName="X-CSRFToken";let r=a.A.create({baseURL:function(){let e=window.NEXT_PUBLIC_API_BASE_URL||i.env.NEXT_PUBLIC_API_BASE_URL;if(e)return e;let t=window.location.hostname;return"https://".concat(t,"/api")}(),withCredentials:!0}),o=null;function s(e){let t="undefined"!=typeof document?document.cookie.match(RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")):null;return t?decodeURIComponent(t[1]):null}r.interceptors.request.use(e=>{if(["post","put","patch","delete"].includes((e.method||"get").toLowerCase())){let t=o||s("csrftoken");t&&(e.headers||(e.headers={}),e.headers["X-CSRFToken"]=t)}return e}),r.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response&&403===e.response.status&&!(null==t?void 0:t._retry))try{var n;t._retry=!0;let e=await r.get("/csrf/");return o=s("csrftoken")||(null==e||null==(n=e.data)?void 0:n.csrftoken)||null,await r.request(t)}catch(e){return Promise.reject(e)}return Promise.reject(e)});class l{static async csrf(){try{var e;let t=await r.get("/csrf/");return o=s("csrftoken")||(null==t||null==(e=t.data)?void 0:e.csrftoken)||null,t}catch(e){return e.response}}static async register(e){try{return await r.post("/register/",e)}catch(e){return e.response}}static async login(e){try{return await r.post("/login/",e)}catch(e){return e.response}}static async isAuth(){try{return await r.get("/auth/status/")}catch(e){return e.response}}static async authVk(e){try{return await r.post("/auth/vk/",e)}catch(e){return e.response}}static async completeProfile(e){try{return await r.post("/auth/complete-profile/",e)}catch(e){return e.response}}static async streak(){try{return await r.get("/streak/")}catch(e){return e.response}}static async feedback(e){try{return await r.post("/feedback/submit/",e)}catch(e){return e.response}}static async questions(){try{return await r.get("/questions/")}catch(e){return e.response}}static async answers(e){try{return await r.post("/tests/submit/",e)}catch(e){return e.response}}static async calming(e){try{return await r.post("/calming/",e)}catch(e){return e.response}}}},5092:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var a=n(5155),i=n(8652),r=n(879),o=n(7476),s=n(2115),l=n(2257),p=n(5695);function c(){let[e,t]=(0,s.useState)(""),[n,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[f,x]=(0,s.useState)(null),g=(0,p.useRouter)();(0,s.useEffect)(()=>{(async()=>{let e=await l.A.isAuth();if(200===e.status){var n;let a=e.data.participant;console.log(a),t(null==a?void 0:a.full_name),c(null==a?void 0:a.age),m(null==a||null==(n=a.user)?void 0:n.email),u(null==a?void 0:a.phone)}})()},[]);let y=async t=>{t.preventDefault(),x(null);try{if(await l.A.csrf(),12!==d.length)return void x({phone:"Введите корректный номер телефона"});let t=await l.A.completeProfile({email:h,full_name:e,age:n,phone:d});if(console.log(t),400===t.status){let e=t.data;x({email:e.user.email?e.user.email[0]:"",full_name:e.full_name?e.full_name[0]:"",age:e.age?e.age[0]:"",phone:e.phone?e.phone[0]:"",detail:e.detail?e.detail:""}),console.log(e)}200===t.status&&g.push("/start")}catch(e){console.error(e)}};return(0,a.jsx)(r.Ym,{children:(0,a.jsxs)(i.A,{children:[(0,a.jsx)("h2",{children:"Регистрация"}),(0,a.jsxs)("p",{className:"description-mini",children:["Пожалуйста, проверьте правильность введённых данных.",(0,a.jsx)("br",{}),"И заполните все пустые поля."]}),(0,a.jsxs)(r.T7,{onSubmit:y,children:[(0,a.jsx)(o.A,{image:"user",label:"ФИО",value:e,error:null==f?void 0:f.full_name,onChange:t}),(0,a.jsx)(o.A,{image:"calendar",label:"Возраст",value:n,type:"number",error:null==f?void 0:f.age,onChange:c}),(0,a.jsx)(o.A,{image:"phone",label:"Номер телефона",value:d,type:"tel",error:null==f?void 0:f.phone,onChange:u}),(0,a.jsx)(o.A,{image:"mail",label:"Email",value:h,type:"email",error:null==f?void 0:f.email,onChange:m}),(0,a.jsx)("button",{type:"submit",children:"Зарегистрироваться"})]})]})})}},7060:(e,t,n)=>{Promise.resolve().then(n.bind(n,5092))},7476:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(5155);n(2115);var i=n(4987),r=n(6766),o=n(412),s=n(9909);n(904);let l=i.Ay.div.withConfig({displayName:"InputAuth__Field",componentId:"sc-a9a8b7c-0"})(["width:412px;display:flex;flex-direction:column;gap:6px;@media (max-width:500px){width:100%;}"]),p=i.Ay.div.withConfig({displayName:"InputAuth__Wrapper",componentId:"sc-a9a8b7c-1"})(["display:flex;justify-content:start;align-items:center;background-color:",";width:100%;padding:5px 6px;border-radius:6px;border:1px solid ",";.PhoneInput{width:100%;}.PhoneInputCountry{display:none;}img{user-drag:none;-webkit-user-drag:none;}input{font-family:var(--font-manrope),serif;font-size:20px;color:",";margin-left:5px;width:100%;background:transparent;outline:none;border:none;}@media (max-width:500px){padding:8px 6px;img{width:32px;}input{font-size:18px;}}@media (max-width:400px){padding:6px 6px;img{width:30px;}input{font-size:16px;}}"],o.tb,e=>e.$hasError?o.XK:"transparent",o.hk),c=i.Ay.div.withConfig({displayName:"InputAuth__ErrorText",componentId:"sc-a9a8b7c-2"})(["font-family:var(--font-manrope),serif;font-size:14px;color:",";margin-left:6px;margin-bottom:-4px;"],o.XK),d=e=>{let{image:t,label:n,value:i,onChange:o,type:d,error:u}=e;return(0,a.jsxs)(l,{children:[u&&(0,a.jsx)(c,{children:u}),(0,a.jsxs)(p,{$hasError:!!u,children:[(0,a.jsx)(r.default,{width:40,height:40,src:"/icons/auth/".concat(t,".svg"),alt:t}),"tel"===d?(0,a.jsx)(s.Ay,{placeholder:n,value:i,onChange:e=>{o(e||"")},defaultCountry:"RU"}):(0,a.jsx)("input",{placeholder:n,value:i,onChange:e=>o(e.target.value),type:d||"text",min:0})]})]})}},8652:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(5155),i=n(2115),r=n(4987),o=n(412);let s=r.Ay.div.withConfig({displayName:"WindowBlock__Wrapper",componentId:"sc-4d1b07a9-0"})(["background-color:",";z-index:10;position:relative;border-radius:25px;padding:44px 36px;display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%;transition:height .4s ease;h2{font-family:var(--font-montserrat);font-weight:800;font-size:32px;line-height:1;text-align:center;text-wrap:nowrap;}p{font-family:var(--font-manrope),serif;color:",";text-align:center;font-size:18px;&.description-start{width:620px;font-weight:400;}&.description-mini{font-size:16px;margin-top:16px;}a{color:",";position:relative;&::before{content:'';background-color:",";position:absolute;bottom:1px;left:0;width:100%;height:1px;}}}@media (max-width:700px){p{&.description-start{width:100%;}}}@media (max-width:550px){width:100vw;padding:32px 16px;h2{font-size:30px;}p{&.description-mini{font-size:14px;width:110%;margin-top:14px;}&.description-start{font-size:16px;}}}@media (max-width:400px){h2{font-size:28px;}p{&.description-mini{font-size:12px;margin-top:12px;width:120%;}&.description-start{font-size:14px;}}}"],o.vz,o.hk,o.eq,o.eq),l=e=>{let{children:t}=e;return 0===i.Children.count(t)?null:(0,a.jsx)(s,{className:"content",children:t})}}},e=>{e.O(0,[129,118,766,410,441,964,358],()=>e(e.s=7060)),_N_E=e.O()}]);