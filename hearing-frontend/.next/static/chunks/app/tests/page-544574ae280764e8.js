(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{412:(e,t,i)=>{"use strict";i.d(t,{Bs:()=>r,XK:()=>l,Zf:()=>d,eq:()=>n,hk:()=>o,tb:()=>a,vz:()=>s});let n="#157AFE",s="#fff",a="#F5F7F9",r="#EFEFEF",o="#84868A",d="#333",l="#FF6F61"},879:(e,t,i)=>{"use strict";i.d(t,{$G:()=>o,I4:()=>d,T7:()=>r,Ym:()=>a});var n=i(4987),s=i(412);let a=n.Ay.section.withConfig({displayName:"page.styled__BackgroundPage",componentId:"sc-6a43832-0"})(["min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;padding:24px;z-index:10;.content{animation:fadeInUp 400ms ease-out both;}@keyframes fadeInUp{from{opacity:0;transform:translateY(16px) scale(0.9);}to{opacity:1;transform:translateY(0) scale(1);}}@media (max-width:500px){padding:0;}}"]),r=n.Ay.form.withConfig({displayName:"page.styled__AuthForm",componentId:"sc-6a43832-1"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;gap:14px;margin:24px 0;z-index:20;width:100%;button{margin-top:28px;background-color:",";font-size:24px;font-family:var(--font-manrope),serif;color:",";height:50px;border-radius:6px;width:100%;}@media (max-width:500px){margin:12px 0;button{height:45px;font-size:20px;margin-top:14px;}}"],s.eq,s.vz),o=n.Ay.div.withConfig({displayName:"page.styled__ContentBlock",componentId:"sc-6a43832-2"})(["position:relative;"]),d=n.Ay.div.withConfig({displayName:"page.styled__OtherErrors",componentId:"sc-6a43832-3"})(["position:absolute;top:0;right:0;width:100%;height:",";opacity:",";background-color:",";border-radius:25px;z-index:1;transition:.4s;display:flex;justify-content:center;align-items:end;padding:4.5%;font-family:var(--font-manrope),serif;font-weight:500;font-size:24px;color:",";@media (max-width:500px){font-size:20px;height:",";padding:3.2%;}@media (max-width:400px){padding:3.2%;}@media (max-width:320px){padding:4%;}"],e=>{let{$message:t}=e;return t?"114%":"100%"},e=>{let{$message:t}=e;return+!!t},s.XK,s.vz,e=>{let{$message:t}=e;return t?"112%":"100%"})},2257:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(3464),s=i(9509);n.A.defaults.withCredentials=!0,n.A.defaults.xsrfCookieName="csrftoken",n.A.defaults.xsrfHeaderName="X-CSRFToken";let a=n.A.create({baseURL:function(){let e=window.NEXT_PUBLIC_API_BASE_URL||s.env.NEXT_PUBLIC_API_BASE_URL;if(e)return e;let t=window.location.hostname;return"https://".concat(t,"/api")}(),withCredentials:!0}),r=null;function o(e){let t="undefined"!=typeof document?document.cookie.match(RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")):null;return t?decodeURIComponent(t[1]):null}a.interceptors.request.use(e=>{if(["post","put","patch","delete"].includes((e.method||"get").toLowerCase())){let t=r||o("csrftoken");t&&(e.headers||(e.headers={}),e.headers["X-CSRFToken"]=t)}return e}),a.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response&&403===e.response.status&&!(null==t?void 0:t._retry))try{var i;t._retry=!0;let e=await a.get("/csrf/");return r=o("csrftoken")||(null==e||null==(i=e.data)?void 0:i.csrftoken)||null,await a.request(t)}catch(e){return Promise.reject(e)}return Promise.reject(e)});class d{static async csrf(){try{var e;let t=await a.get("/csrf/");return r=o("csrftoken")||(null==t||null==(e=t.data)?void 0:e.csrftoken)||null,t}catch(e){return e.response}}static async register(e){try{return await a.post("/register/",e)}catch(e){return e.response}}static async login(e){try{return await a.post("/login/",e)}catch(e){return e.response}}static async isAuth(){try{return await a.get("/auth/status/")}catch(e){return e.response}}static async authVk(e){try{return await a.post("/auth/vk/",e)}catch(e){return e.response}}static async streak(){try{return await a.get("/streak/")}catch(e){return e.response}}static async feedback(e){try{return await a.post("/feedback/submit/",e)}catch(e){return e.response}}static async questions(){try{return await a.get("/questions/")}catch(e){return e.response}}static async answers(e){try{return await a.post("/tests/submit/",e)}catch(e){return e.response}}static async calming(e){try{return await a.post("/calming/",e)}catch(e){return e.response}}}},4859:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>j});var n=i(5155),s=i(2115),a=i(8652),r=i(879),o=i(4987),d=i(412);let l=o.Ay.div.withConfig({displayName:"page.styled__TestSection",componentId:"sc-7f7ceb83-0"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;gap:32px;width:600px;@media (max-width:700px){max-width:500px;h2{font-size:30px;}}@media (max-width:550px){max-width:470px;h2{font-size:26px;}}@media (max-width:500px){max-width:100%;h2{font-size:24px;}}"]),c=o.Ay.div.withConfig({displayName:"page.styled__TitleTest",componentId:"sc-7f7ceb83-1"})(["display:flex;justify-content:start;align-items:start;flex-direction:column;gap:16px;width:100%;h2{text-align:start;text-wrap:wrap;}"]),p=o.Ay.form.withConfig({displayName:"page.styled__FormTest",componentId:"sc-7f7ceb83-2"})(["display:flex;justify-content:start;align-items:start;flex-direction:column;width:100%;gap:16px;@media (max-width:700px){gap:14px;}"]),u=o.Ay.label.withConfig({displayName:"page.styled__QuestionBlock",componentId:"sc-7f7ceb83-3"})(["display:flex;justify-content:start;align-items:center;gap:12px;p{text-align:start;font-size:20px;font-weight:400;color:",";}@media (max-width:700px){p{font-size:18px;}}@media (max-width:500px){p{font-size:16px;}}"],d.Zf),h=o.Ay.div.withConfig({displayName:"page.styled__ButtonsWrapper",componentId:"sc-7f7ceb83-4"})(["display:flex;justify-content:space-between;align-items:center;width:100%;@media (max-width:700px){button{font-size:22px;height:47px;}button:nth-last-child(1){width:170px;}button:nth-last-child(2){width:150px;}}"]),x=o.Ay.button.withConfig({displayName:"page.styled__ButtonTest",componentId:"sc-7f7ceb83-5"})(["border-radius:6px;background:",";font-size:24px;font-weight:700;font-family:var(--font-manrope),serif;color:",";width:",";height:56px;transition:background .4s ease,color .4s ease;&:disabled{background:",";color:",";cursor:auto;}"],e=>{let{$primary:t}=e;return t?d.eq:d.tb},e=>{let{$primary:t}=e;return t?d.vz:d.Zf},e=>{let{$primary:t}=e;return t?"200px":"150px"},d.tb,d.Zf),f=o.Ay.textarea.withConfig({displayName:"page.styled__TextAreaStyled",componentId:"sc-7f7ceb83-6"})(["background:",";padding:12px 10px;border-radius:10px;resize:none;height:110px;width:100%;margin-top:8px;font-size:18px;font-family:var(--font-manrope),serif;color:",";@media (max-width:700px){font-size:16px;padding:10px 8px;height:90px;}"],d.tb,d.Zf),m=o.Ay.div.withConfig({displayName:"ProgressBar__Wrapper",componentId:"sc-5c72fe16-0"})(["display:flex;justify-content:center;align-items:center;gap:14px;width:100%;"]),g=o.Ay.progress.withConfig({displayName:"ProgressBar__ProgressStyled",componentId:"sc-5c72fe16-1"})(["height:14px;width:100%;border-radius:12px;overflow:hidden;&::-webkit-progress-bar{background-color:",";border-radius:12px;}&::-webkit-progress-value{background-color:",";border-radius:12px;transition:width 0.3s;}&::-moz-progress-bar{background-color:",";border-radius:12px;}@media (max-width:430px){height:12px;}"],d.Bs,d.eq,d.eq),y=o.Ay.p.withConfig({displayName:"ProgressBar__Percent",componentId:"sc-5c72fe16-2"})(["font-size:20px !important;color:",";font-weight:700;font-family:var(--font-manrope),serif;@media (max-width:430px){font-size:18px !important;}"],d.hk),w=e=>{let{totalQuestions:t,currentQuestion:i}=e,s=Math.round(i/t*100);return(0,n.jsxs)(m,{children:[(0,n.jsx)(g,{max:t,value:i}),(0,n.jsxs)(y,{children:[s,"%"]})]})};var b=i(7480),v=i(2257),k=i(6791),_=i(5695);let j=()=>{var e,t,i;let[o,d]=(0,s.useState)([]),[m,g]=(0,s.useState)(0),[y,j]=(0,s.useState)({}),[A,C]=(0,s.useState)(null),[z,I]=(0,s.useState)(!1),S=(0,_.useRouter)(),N=(0,k.Ts)(),T=(0,k.P9)(),q={12:{title:"Госпитальная шкала тревоги и депрессии (HADS). Ответьте, пожалуйста, на следующие вопросы:",text:"Часть 1. Тревога. Каждому утверждению соответствуют 4 варианта ответа. Выберите тот из ответов, который соответствует Вашему состоянию:"},19:{title:"Госпитальная шкала тревоги и депрессии (HADS). Ответьте, пожалуйста, на следующие вопросы:",text:"Часть 2. Депрессия. Каждому утверждению соответствуют 4 варианта ответа. Выберите тот из ответов, который соответствует Вашему состоянию:"},26:{title:"Ниже вы найдете 13 утверждений, описывающих различные мысли и чувства, которые могут быть связаны с шумом в ушах у вас.",text:"Шкала катастрофизации тиннитуса (TCS). Шкала катастрофизации тиннитуса направлена на определение мыслей и чувств, которые вы испытываете при ощущении шума в ушах. С помощью данного опросника мы хотим выяснить, какое влияние оказывает шум в ушах на ваше состояние: на настроение, поведение, отношение."}};(0,s.useEffect)(()=>{let e=!0;return(async()=>{try{await (0,k.Tu)(),e&&I(!0)}catch(t){console.log(t),e&&I(!0)}})(),()=>{e=!1}},[]),(0,s.useEffect)(()=>{if(z){if(!T)return void S.push("/instruction");(async()=>{try{let e=await v.A.questions();d(e.data.questions)}catch(e){console.log(e),d([])}})()}},[z,T,S]);let P=async()=>{let e=Object.entries(y).map(e=>{let[t,i]=e,n=Number(t),s=o.find(e=>e.id===n),a={question:n};return(i.selected&&i.selected.length>0&&((null==s?void 0:s.type)==="single"?a.selected=i.selected[0]:(null==s?void 0:s.type)==="multiple"&&(a.selected=i.selected)),i.input&&""!==i.input.trim()&&(a.input=i.input.trim()),void 0!==a.selected||a.input)?a:null}).filter(e=>null!==e);await v.A.answers({day:N,answers:e}),S.push("/instruction")},R=o[m];return(0,n.jsx)(r.Ym,{children:(0,n.jsx)(a.A,{children:R&&(0,n.jsxs)(l,{children:[(0,n.jsxs)(c,{children:[(0,n.jsx)(w,{totalQuestions:o.length,currentQuestion:m+1}),!A&&(0,n.jsx)("h2",{children:R.question}),A&&(0,n.jsx)("h2",{children:A.title})]}),(0,n.jsx)(p,{id:"questionForm",onSubmit:e=>{e.preventDefault();let t=o[m];if(t&&q[t.id])return void C(q[t.id]);m<o.length-1?g(e=>e+1):P()},children:A?(0,n.jsx)(u,{children:(0,n.jsx)("p",{style:{cursor:"auto"},children:A.text})}):(0,n.jsxs)(n.Fragment,{children:["multiple"===R.type&&(null==(e=R.options)?void 0:e.map(e=>{var t;let i=(null==(t=y[R.id])?void 0:t.selected)||[];return(0,n.jsxs)(u,{children:[(0,n.jsx)(b.A,{isReception:i.includes(e.id),setIsReception:t=>((e,t,i)=>{j(n=>{var s;let a=(null==(s=n[e])?void 0:s.selected)||[],r=i?[...a,t]:a.filter(e=>e!==t);return{...n,[e]:{...n[e],selected:r}}})})(R.id,e.id,t)}),(0,n.jsx)("p",{children:e.label})]},e.id)})),"single"===R.type&&(null==(t=R.options)?void 0:t.map(e=>{var t,i;return(0,n.jsxs)(u,{children:[(0,n.jsx)(b.A,{type:"radio",isReception:(null==(i=y[R.id])||null==(t=i.selected)?void 0:t[0])===e.id,setIsReception:t=>{var i,n;return t&&(i=R.id,n=e.id,void j(e=>({...e,[i]:{selected:[n]}})))}}),(0,n.jsx)("p",{children:e.label})]},e.id)})),R.input&&(0,n.jsx)(f,{placeholder:R.input,value:(null==(i=y[R.id])?void 0:i.input)||"",onChange:e=>((e,t)=>{j(i=>({...i,[e]:{...i[e],input:t}}))})(R.id,e.target.value)})]})}),(0,n.jsxs)(h,{children:[(0,n.jsx)(x,{onClick:()=>{if(A)return void C(null);m>0&&g(m-1)},disabled:0===m&&!A,children:"Назад"}),(0,n.jsx)(x,{$primary:!0,disabled:!A&&!(e=>{let t=y[e.id];return"multiple"===e.type||"single"===e.type?!!(null==t?void 0:t.selected)&&t.selected.length>0:"input"===e.type&&!!(null==t?void 0:t.input)&&""!==t.input.trim()})(R),type:A?"button":"submit",onClick:A?()=>{C(null),g(e=>e+1)}:void 0,form:"questionForm",children:m!==o.length-1||A?"Далее":"Отправить"})]})]})})})}},5695:(e,t,i)=>{"use strict";var n=i(8999);i.o(n,"usePathname")&&i.d(t,{usePathname:function(){return n.usePathname}}),i.o(n,"useRouter")&&i.d(t,{useRouter:function(){return n.useRouter}}),i.o(n,"useServerInsertedHTML")&&i.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})},6791:(e,t,i)=>{"use strict";i.d(t,{P9:()=>d,Tu:()=>p,Ts:()=>l,yL:()=>u,dq:()=>c});var n=i(2115);let s=e=>{let t,i=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),i.forEach(i=>i(t,e))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>r,subscribe:e=>(i.add(e),()=>i.delete(e))},r=t=e(n,s,a);return a},a=e=>{let t=(e=>e?s(e):s)(e),i=e=>(function(e,t=e=>e){let i=n.useSyncExternalStore(e.subscribe,n.useCallback(()=>t(e.getState()),[e,t]),n.useCallback(()=>t(e.getInitialState()),[e,t]));return n.useDebugValue(i),i})(t,e);return Object.assign(i,t),i};var r=i(2257);let o=a(e=>({isTestDay:!1,lastVisitDate:"",nextTestDay:0,streak:0,studyGroup:0,loaded:!1,loadStreak:async()=>{try{let t=await r.A.streak();t&&200===t.status?e({isTestDay:t.data.is_test_day,lastVisitDate:t.data.last_visit_date,nextTestDay:t.data.next_test_day,streak:t.data.streak,studyGroup:t.data.study_group,loaded:!0}):e({loaded:!0})}catch(t){e({loaded:!0})}}})),d=()=>o(e=>e.isTestDay),l=()=>o(e=>e.streak),c=()=>o(e=>e.studyGroup),p=()=>o.getState().loadStreak(),u=()=>o(e=>e.loaded)},7480:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var n=i(5155);i(2115);var s=i(4987),a=i(412);let r=s.Ay.label.withConfig({displayName:"Reception__CheckBoxLabel",componentId:"sc-d427cc9-0"})(["display:flex;align-items:center;cursor:pointer;font-size:16px;font-family:var(--font-manrope);color:#333;"]),o=s.Ay.input.withConfig({displayName:"Reception__StyledCheckbox",componentId:"sc-d427cc9-1"})(["display:none;&:checked + span{background-color:",";border-color:",";}&:checked + span svg{opacity:1;}"],a.eq,a.eq),d=s.Ay.span.withConfig({displayName:"Reception__CheckboxWrapper",componentId:"sc-d427cc9-2"})(["width:28px;height:28px;border:2px solid ",";border-radius:4px;display:flex;align-items:center;justify-content:center;transition:all 0.3s ease;svg{opacity:0;transition:opacity 0.3s ease;}@media (max-width:500px){width:22px;height:22px;}@media (max-width:350px){width:18px;height:18px;}"],a.tb),l=e=>{let{isReception:t,setIsReception:i,type:s}=e;return(0,n.jsxs)(r,{children:[(0,n.jsx)(o,{type:s||"checkbox",checked:t,onChange:e=>{i(e.target.checked)}}),(0,n.jsx)(d,{children:(0,n.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M5.83325 13.9032L11.3446 19.25L22.1666 8.75",stroke:"white","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"})})})]})}},8652:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(5155),s=i(2115),a=i(4987),r=i(412);let o=a.Ay.div.withConfig({displayName:"WindowBlock__Wrapper",componentId:"sc-4d1b07a9-0"})(["background-color:",";z-index:10;position:relative;border-radius:25px;padding:44px 36px;display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%;transition:height .4s ease;h2{font-family:var(--font-montserrat);font-weight:800;font-size:32px;line-height:1;text-align:center;text-wrap:nowrap;}p{font-family:var(--font-manrope),serif;color:",";text-align:center;font-size:18px;&.description-start{width:620px;font-weight:400;}&.description-mini{font-size:16px;margin-top:16px;}a{color:",";position:relative;&::before{content:'';background-color:",";position:absolute;bottom:1px;left:0;width:100%;height:1px;}}}@media (max-width:700px){p{&.description-start{width:100%;}}}@media (max-width:550px){width:100vw;padding:32px 16px;h2{font-size:30px;}p{&.description-mini{font-size:14px;width:110%;margin-top:14px;}&.description-start{font-size:16px;}}}@media (max-width:400px){h2{font-size:28px;}p{&.description-mini{font-size:12px;margin-top:12px;width:120%;}&.description-start{font-size:14px;}}}"],r.vz,r.hk,r.eq,r.eq),d=e=>{let{children:t}=e;return 0===s.Children.count(t)?null:(0,n.jsx)(o,{className:"content",children:t})}},8708:(e,t,i)=>{Promise.resolve().then(i.bind(i,4859))}},e=>{e.O(0,[987,464,441,964,358],()=>e(e.s=8708)),_N_E=e.O()}]);