(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{412:(e,t,r)=>{"use strict";r.d(t,{Bs:()=>o,XK:()=>c,Zf:()=>s,eq:()=>i,hk:()=>d,tb:()=>a,vz:()=>n});let i="#157AFE",n="#fff",a="#F5F7F9",o="#EFEFEF",d="#84868A",s="#333",c="#FF6F61"},879:(e,t,r)=>{"use strict";r.d(t,{$G:()=>d,I4:()=>s,T7:()=>o,Ym:()=>a});var i=r(4987),n=r(412);let a=i.Ay.section.withConfig({displayName:"page.styled__BackgroundPage",componentId:"sc-6a43832-0"})(["min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;padding:24px;z-index:10;.content{animation:fadeInUp 400ms ease-out both;}@keyframes fadeInUp{from{opacity:0;transform:translateY(16px) scale(0.9);}to{opacity:1;transform:translateY(0) scale(1);}}@media (max-width:500px){padding:0;}}"]),o=i.Ay.form.withConfig({displayName:"page.styled__AuthForm",componentId:"sc-6a43832-1"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;gap:14px;margin:24px 0;z-index:20;width:100%;button{margin-top:28px;background-color:",";font-size:24px;font-family:var(--font-manrope),serif;color:",";height:50px;border-radius:6px;width:100%;}@media (max-width:500px){margin:12px 0;button{height:45px;font-size:20px;margin-top:14px;}}"],n.eq,n.vz),d=i.Ay.div.withConfig({displayName:"page.styled__ContentBlock",componentId:"sc-6a43832-2"})(["position:relative;"]),s=i.Ay.div.withConfig({displayName:"page.styled__OtherErrors",componentId:"sc-6a43832-3"})(["position:absolute;top:0;right:0;width:100%;height:",";opacity:",";background-color:",";border-radius:25px;z-index:1;transition:.4s;display:flex;justify-content:center;align-items:end;padding:4.5%;font-family:var(--font-manrope),serif;font-weight:500;font-size:24px;color:",";@media (max-width:500px){font-size:20px;height:",";padding:3.2%;}@media (max-width:400px){padding:3.2%;}@media (max-width:320px){padding:4%;}"],e=>{let{$message:t}=e;return t?"114%":"100%"},e=>{let{$message:t}=e;return+!!t},n.XK,n.vz,e=>{let{$message:t}=e;return t?"112%":"100%"})},2257:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(3464),n=r(9509);i.A.defaults.withCredentials=!0,i.A.defaults.xsrfCookieName="csrftoken",i.A.defaults.xsrfHeaderName="X-CSRFToken";let a=i.A.create({baseURL:function(){let e=window.NEXT_PUBLIC_API_BASE_URL||n.env.NEXT_PUBLIC_API_BASE_URL;if(e)return e;let t=window.location.hostname;return"https://".concat(t,"/api")}(),withCredentials:!0}),o=null;function d(e){let t="undefined"!=typeof document?document.cookie.match(RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")):null;return t?decodeURIComponent(t[1]):null}a.interceptors.request.use(e=>{if(["post","put","patch","delete"].includes((e.method||"get").toLowerCase())){let t=o||d("csrftoken");t&&(e.headers||(e.headers={}),e.headers["X-CSRFToken"]=t)}return e}),a.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response&&403===e.response.status&&!(null==t?void 0:t._retry))try{var r;t._retry=!0;let e=await a.get("/csrf/");return o=d("csrftoken")||(null==e||null==(r=e.data)?void 0:r.csrftoken)||null,await a.request(t)}catch(e){return Promise.reject(e)}return Promise.reject(e)});class s{static async csrf(){try{var e;let t=await a.get("/csrf/");return o=d("csrftoken")||(null==t||null==(e=t.data)?void 0:e.csrftoken)||null,t}catch(e){return e.response}}static async register(e){try{return await a.post("/register/",e)}catch(e){return e.response}}static async login(e){try{return await a.post("/login/",e)}catch(e){return e.response}}static async isAuth(){try{return await a.get("/auth/status/")}catch(e){return e.response}}static async authVk(e){try{return await a.post("/auth/vk/",e)}catch(e){return e.response}}static async streak(){try{return await a.get("/streak/")}catch(e){return e.response}}static async feedback(e){try{return await a.post("/feedback/submit/",e)}catch(e){return e.response}}static async questions(){try{return await a.get("/questions/")}catch(e){return e.response}}static async answers(e){try{return await a.post("/tests/submit/",e)}catch(e){return e.response}}static async calming(e){try{return await a.post("/calming/",e)}catch(e){return e.response}}}},5695:(e,t,r)=>{"use strict";var i=r(8999);r.o(i,"usePathname")&&r.d(t,{usePathname:function(){return i.usePathname}}),r.o(i,"useRouter")&&r.d(t,{useRouter:function(){return i.useRouter}}),r.o(i,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return i.useServerInsertedHTML}})},6954:(e,t,r)=>{Promise.resolve().then(r.bind(r,7871))},7293:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var i=r(5155);r(2115);var n=r(4987),a=r(412);let o=n.Ay.button.withConfig({displayName:"SubmitButton__StyledButton",componentId:"sc-30e20523-0"})(["width:",";height:",";background-color:",";border-radius:6px;transition:background-color .4s ease,color .4s ease,height .3s ease;margin-top:","px;font-family:var(--font-manrope),serif;font-weight:500;font-size:22px;color:",";opacity:",";&:disabled{background-color:",";color:",";cursor:auto;}"],e=>{let{$width:t}=e;return t?"".concat(t,"px"):"100%"},e=>{let{$height:t,$hidden:r}=e;return r?"0px":t?"".concat(t,"px"):"50px"},e=>{let{$primary:t}=e;return t?a.eq:a.tb},e=>{let{$marginTop:t}=e;return t||0},e=>{let{$primary:t}=e;return t?a.vz:a.Zf},e=>{let{$hidden:t}=e;return+!t},a.tb,a.Zf),d=e=>{let{label:t,width:r=200,height:n=50,onClick:a,disabled:d,primary:s=!1,hidden:c=!1,marginTop:p=0}=e;return(0,i.jsx)(o,{onClick:a,$width:r,$height:n,$primary:s,disabled:d,$hidden:c,$marginTop:p,className:"submit-btn",children:t})}},7871:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var i=r(5155),n=r(8652),a=r(879),o=r(5695),d=r(4987),s=r(412);let c=d.Ay.div.withConfig({displayName:"page.styled__WrapperWindowVide",componentId:"sc-10c4c11f-0"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;@media (max-width:750px){.submit-btn{font-size:18px;width:240px;}}"]),p=d.Ay.div.withConfig({displayName:"page.styled__TitleInstruction",componentId:"sc-10c4c11f-1"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;gap:10px;p{width:920px;margin-bottom:32px;}@media (max-width:1000px){p{width:100%;font-size:16px;}}@media (max-width:600px){h2{text-wrap:wrap;}p{font-size:14px;}}@media (max-width:400px){h2{font-size:18px;}p{font-size:10px;}}"]),l=d.Ay.div.withConfig({displayName:"page.styled__VideoWrapper",componentId:"sc-10c4c11f-2"})(["width:940px;height:490px;border-radius:24px;overflow:hidden;video{width:100%;}@media (max-width:1000px){width:100%;height:450px;}@media (max-width:800px){height:380px;}@media (max-width:600px){height:240px;}@media (max-width:400px){height:180px;}"]),u=d.Ay.div.withConfig({displayName:"page.styled__VideoError",componentId:"sc-10c4c11f-3"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;border-radius:24px;color:#666;"]),m=d.Ay.div.withConfig({displayName:"page.styled__VideoControls",componentId:"sc-10c4c11f-4"})(["display:flex;justify-content:space-between;align-items:center;gap:10px;margin-top:16px;width:100%;@media (max-width:550px){flex-wrap:wrap;justify-content:flex-start;}@media (max-width:450px){flex-wrap:wrap;}"]),h=d.Ay.button.withConfig({displayName:"page.styled__VideoButton",componentId:"sc-10c4c11f-5"})(["background-color:",";color:",";min-width:",";height:43px;font-size:20px;border-radius:8px;font-family:var(--font-manrope),serif;font-weight:500;@media (max-width:750px){font-size:18px;height:40px;min-width:",";}@media (max-width:600px){font-size:16px;height:36px;min-width:",";}@media (max-width:550px){flex:0 0 auto;order:2;}"],e=>{let{$primary:t}=e;return t?s.eq:s.tb},e=>{let{$primary:t}=e;return t?s.vz:s.Zf},e=>{let{$primary:t}=e;return t?"101px":"86px"},e=>{let{$primary:t}=e;return t?"80px":"64px"},e=>{let{$primary:t}=e;return t?"70px":"54px"}),x=d.Ay.input.withConfig({displayName:"page.styled__VideoRange",componentId:"sc-10c4c11f-6"})(["border-radius:8px;-webkit-appearance:none;width:100%;height:12px;background-color:",";margin:0 20px;cursor:pointer;&::-webkit-slider-runnable-track{height:12px;border-radius:8px;background:linear-gradient( to right,"," 0%,"," var(--value,0%),"," var(--value,0%),"," 100% );}&::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background-color:",";border:5px solid ",";cursor:pointer;margin-top:-2px;position:relative;z-index:2;transition:transform 0.1s ease;}&::-webkit-slider-thumb:hover{transform:scale(1.1);}&::-moz-range-track{height:12px;border-radius:8px;background:",";}&::-moz-range-progress{background-color:",";height:100%;border-radius:8px;}&::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background-color:",";border:5px solid ",";cursor:pointer;transition:transform 0.1s ease;}&::-moz-range-thumb:hover{transform:scale(1.1);}&:focus{outline:none;}&:focus::-webkit-slider-thumb{box-shadow:0 0 0 3px rgba(0,123,255,0.3);}&:focus::-moz-range-thumb{box-shadow:0 0 0 3px rgba(0,123,255,0.3);}&:disabled{opacity:0.5;cursor:not-allowed;}&:disabled::-webkit-slider-thumb{cursor:not-allowed;}&:disabled::-moz-range-thumb{cursor:not-allowed;}@media (max-width:600px){height:6px;}@media (max-width:550px){flex:1 1 100%;order:5;margin:10px 0;}"],s.Bs,s.eq,s.eq,s.Bs,s.Bs,s.vz,s.eq,s.Bs,s.eq,s.vz,s.eq),f=d.Ay.p.withConfig({displayName:"page.styled__VideTime",componentId:"sc-10c4c11f-7"})(["font-size:18px;color:",";font-family:var(--font-manrope),serif;font-weight:700;@media (max-width:750px){font-size:16px !important;}@media (max-width:600px){display:none;}@media (max-width:550px){display:block;order:2;flex:1 1 auto;}"],s.hk);var g=r(7293),w=r(2115),y=r(2257);function b(){let e=(0,o.useRouter)(),t=(0,w.useRef)(null),[r,d]=(0,w.useState)(0),[s,b]=(0,w.useState)(0),[v,k]=(0,w.useState)(!1),[_,z]=(0,w.useState)(!1),[N,C]=(0,w.useState)(!1),A=async()=>{if(t.current){console.log(await y.A.streak());try{t.current.paused?(await t.current.play(),k(!0)):(t.current.pause(),k(!1))}catch(e){console.error("Error playing video:",e)}}},j=e=>{if(t.current){let r=t.current.currentTime+e;t.current.currentTime=Math.max(0,Math.min(r,t.current.duration))}};(0,w.useEffect)(()=>{let e=t.current;if(!e)return;let r=()=>{d(e.currentTime)},i=()=>{e.duration&&!isNaN(e.duration)&&e.duration>0&&e.duration!==1/0&&(b(e.duration),C(!0),console.log("Video duration loaded:",e.duration))},n=()=>{0===s&&e.duration&&!isNaN(e.duration)&&e.duration>0&&e.duration!==1/0&&(b(e.duration),C(!0),console.log("Video duration loaded from canplay:",e.duration))},a=()=>{k(!1)},o=()=>{z(!0),C(!1),console.error("Video failed to load")};e.readyState>=1?e.duration&&!isNaN(e.duration)&&e.duration>0&&e.duration!==1/0&&(b(e.duration),C(!0),console.log("Video already loaded, duration:",e.duration)):e.load();let c=setTimeout(()=>{0===s&&e.duration&&!isNaN(e.duration)&&e.duration>0&&e.duration!==1/0&&(b(e.duration),C(!0),console.log("Video duration loaded from fallback timer:",e.duration))},1e3),p=setTimeout(()=>{0===s&&e.duration&&!isNaN(e.duration)&&e.duration>0&&e.duration!==1/0&&(b(e.duration),C(!0),console.log("Video duration loaded from additional timer:",e.duration))},2e3);return e.addEventListener("timeupdate",r),e.addEventListener("loadedmetadata",i),e.addEventListener("canplay",n),e.addEventListener("ended",a),e.addEventListener("error",o),()=>{clearTimeout(c),clearTimeout(p),e.removeEventListener("timeupdate",r),e.removeEventListener("loadedmetadata",i),e.removeEventListener("canplay",n),e.removeEventListener("ended",a),e.removeEventListener("error",o)}},[s]);let E=e=>{if(isNaN(e)||0===e||e===1/0)return"0:00";let t=Math.floor(e/60),r=Math.floor(e%60);return"".concat(t,":").concat(String(r).padStart(2,"0"))},I=s>0&&!isNaN(s)&&s!==1/0;return(0,i.jsx)(a.Ym,{children:(0,i.jsx)(n.A,{children:(0,i.jsxs)(c,{children:[(0,i.jsxs)(p,{children:[(0,i.jsx)("h2",{children:"Теперь прослушайте аудиофайл"}),(0,i.jsx)("p",{children:"Как только вы услышите шум, похожий на ваш, нажмите кнопку \xabЯ услышал свой шум\xbb, чтобы продолжить. Это поможет нам точно зафиксировать ваш симптом и направить вас к нужному нейроупражнению."})]}),(0,i.jsx)(l,{children:_?(0,i.jsx)(u,{children:(0,i.jsx)("p",{children:"Ошибка загрузки видео. Попробуйте обновить страницу."})}):(0,i.jsxs)("video",{onClick:A,ref:t,preload:"metadata",onLoadedMetadata:()=>{t.current&&t.current.duration&&!isNaN(t.current.duration)&&t.current.duration>0&&t.current.duration!==1/0&&(b(t.current.duration),C(!0),console.log("Video duration from onLoadedMetadata:",t.current.duration))},onCanPlay:()=>{t.current&&0===s&&t.current.duration&&!isNaN(t.current.duration)&&t.current.duration>0&&t.current.duration!==1/0&&(b(t.current.duration),C(!0),console.log("Video duration from onCanPlay:",t.current.duration))},onError:()=>z(!0),children:[(0,i.jsx)("source",{src:"https://neurotinnitus.ru/media/noise.mp4",type:"video/mp4"}),"Ваш браузер не поддерживает видео."]})}),(0,i.jsxs)(m,{children:[(0,i.jsx)(h,{onClick:()=>j(-10),disabled:_||!N,children:"-10c"}),(0,i.jsx)(h,{$primary:!0,onClick:A,disabled:_||!N,children:v?"Пауза":"Пуск"}),(0,i.jsx)(h,{onClick:()=>j(10),disabled:_||!N,children:"+10c"}),(0,i.jsx)(x,{type:"range",min:0,max:I?s:0,step:.1,value:r,onChange:e=>{let r=Number(e.target.value);t.current&&(t.current.currentTime=r,d(r))},style:{"--value":I?"".concat(r/s*100,"%"):"0%"},disabled:_||!N}),(0,i.jsx)(f,{children:N&&I?"".concat(E(r),"/").concat(E(s)):"Загрузка..."})]}),(0,i.jsx)(g.A,{marginTop:12,width:315,height:50,label:"Я услышал свой шум",primary:!0,onClick:()=>{let t=Math.min(Math.max(Math.floor(r/(125/12))+1,1),12);e.push("/neuroexercise?timestamp=".concat(Math.floor(t)))},hidden:v||!(r>0)})]})})})}},8652:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(5155),n=r(2115),a=r(4987),o=r(412);let d=a.Ay.div.withConfig({displayName:"WindowBlock__Wrapper",componentId:"sc-4d1b07a9-0"})(["background-color:",";z-index:10;position:relative;border-radius:25px;padding:44px 36px;display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%;transition:height .4s ease;h2{font-family:var(--font-montserrat);font-weight:800;font-size:32px;line-height:1;text-align:center;text-wrap:nowrap;}p{font-family:var(--font-manrope),serif;color:",";text-align:center;font-size:18px;&.description-start{width:620px;font-weight:400;}&.description-mini{font-size:16px;margin-top:16px;}a{color:",";position:relative;&::before{content:'';background-color:",";position:absolute;bottom:1px;left:0;width:100%;height:1px;}}}@media (max-width:700px){p{&.description-start{width:100%;}}}@media (max-width:550px){width:100vw;padding:32px 16px;h2{font-size:30px;}p{&.description-mini{font-size:14px;width:110%;margin-top:14px;}&.description-start{font-size:16px;}}}@media (max-width:400px){h2{font-size:28px;}p{&.description-mini{font-size:12px;margin-top:12px;width:120%;}&.description-start{font-size:14px;}}}"],o.vz,o.hk,o.eq,o.eq),s=e=>{let{children:t}=e;return 0===n.Children.count(t)?null:(0,i.jsx)(d,{className:"content",children:t})}}},e=>{e.O(0,[987,464,441,964,358],()=>e(e.s=6954)),_N_E=e.O()}]);