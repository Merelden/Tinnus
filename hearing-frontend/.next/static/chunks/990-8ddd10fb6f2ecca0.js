"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{412:(e,t,n)=>{n.d(t,{Bs:()=>o,XK:()=>c,Zf:()=>d,eq:()=>r,hk:()=>s,tb:()=>a,vz:()=>i});let r="#157AFE",i="#fff",a="#F5F7F9",o="#EFEFEF",s="#84868A",d="#333",c="#FF6F61"},879:(e,t,n)=>{n.d(t,{$G:()=>s,I4:()=>d,T7:()=>o,Ym:()=>a});var r=n(4987),i=n(412);let a=r.Ay.section.withConfig({displayName:"page.styled__BackgroundPage",componentId:"sc-6a43832-0"})(["min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;padding:24px;z-index:10;.content{animation:fadeInUp 400ms ease-out both;}@keyframes fadeInUp{from{opacity:0;transform:translateY(16px) scale(0.9);}to{opacity:1;transform:translateY(0) scale(1);}}@media (max-width:500px){padding:0;}}"]),o=r.Ay.form.withConfig({displayName:"page.styled__AuthForm",componentId:"sc-6a43832-1"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;gap:14px;margin:24px 0;z-index:20;width:100%;button{margin-top:28px;background-color:",";font-size:24px;font-family:var(--font-manrope),serif;color:",";height:50px;border-radius:6px;width:100%;}@media (max-width:500px){margin:12px 0;button{height:45px;font-size:20px;margin-top:14px;}}"],i.eq,i.vz),s=r.Ay.div.withConfig({displayName:"page.styled__ContentBlock",componentId:"sc-6a43832-2"})(["position:relative;"]),d=r.Ay.div.withConfig({displayName:"page.styled__OtherErrors",componentId:"sc-6a43832-3"})(["position:absolute;top:0;right:0;width:100%;height:",";opacity:",";background-color:",";border-radius:25px;z-index:1;transition:.4s;display:flex;justify-content:center;align-items:end;padding:4.5%;font-family:var(--font-manrope),serif;font-weight:500;font-size:24px;color:",";@media (max-width:500px){font-size:20px;height:",";padding:3.2%;}@media (max-width:400px){padding:3.2%;}@media (max-width:320px){padding:4%;}"],e=>{let{$message:t}=e;return t?"114%":"100%"},e=>{let{$message:t}=e;return+!!t},i.XK,i.vz,e=>{let{$message:t}=e;return t?"112%":"100%"})},2257:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(3464),i=n(9509);r.A.defaults.withCredentials=!0,r.A.defaults.xsrfCookieName="csrftoken",r.A.defaults.xsrfHeaderName="X-CSRFToken";let a=r.A.create({baseURL:function(){let e=window.NEXT_PUBLIC_API_BASE_URL||i.env.NEXT_PUBLIC_API_BASE_URL;if(e)return e;let t=window.location.hostname;return"https://".concat(t,"/api")}(),withCredentials:!0}),o=null;function s(e){let t="undefined"!=typeof document?document.cookie.match(RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")):null;return t?decodeURIComponent(t[1]):null}a.interceptors.request.use(e=>{if(["post","put","patch","delete"].includes((e.method||"get").toLowerCase())){let t=o||s("csrftoken");t&&(e.headers||(e.headers={}),e.headers["X-CSRFToken"]=t)}return e}),a.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response&&403===e.response.status&&!(null==t?void 0:t._retry))try{var n;t._retry=!0;let e=await a.get("/csrf/");return o=s("csrftoken")||(null==e||null==(n=e.data)?void 0:n.csrftoken)||null,await a.request(t)}catch(e){return Promise.reject(e)}return Promise.reject(e)});class d{static async csrf(){try{var e;let t=await a.get("/csrf/");return o=s("csrftoken")||(null==t||null==(e=t.data)?void 0:e.csrftoken)||null,t}catch(e){return e.response}}static async register(e){try{return await a.post("/register/",e)}catch(e){return e.response}}static async login(e){try{return await a.post("/login/",e)}catch(e){return e.response}}static async isAuth(){try{return await a.get("/auth/status/")}catch(e){return e.response}}static async authVk(e){try{return await a.post("/auth/vk/",e)}catch(e){return e.response}}static async streak(){try{return await a.get("/streak/")}catch(e){return e.response}}static async feedback(e){try{return await a.post("/feedback/submit/",e)}catch(e){return e.response}}static async questions(){try{return await a.get("/questions/")}catch(e){return e.response}}static async answers(e){try{return await a.post("/tests/submit/",e)}catch(e){return e.response}}static async calming(e){try{return await a.post("/calming/",e)}catch(e){return e.response}}}},6610:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(5155),i=n(2115),a=n(4987),o=n(412),s=n(2257);a.Ay.button.withConfig({displayName:"TgBtn__Button",componentId:"sc-bb7a2472-0"})(["width:160px;height:44px;border-radius:6px;background-color:",";img{user-drag:none;-webkit-user-drag:none;}"],o.tb);let d=e=>{let t=(0,i.useRef)(null),{botName:n,onAuthCallback:a}=e;return(0,i.useEffect)(()=>{var e;window.TelegramOnAuthCb=async e=>{try{a&&a(e),await s.A.csrf();let t=function(e){let t="undefined"!=typeof document?document.cookie.match(RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")):null;return t?decodeURIComponent(t[1]):null}("csrftoken")||"",n=await fetch("/api/auth/telegram/",{method:"POST",headers:{"X-CSRFToken":t,"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(e)}),r=await n.json().catch(()=>({}));console.log("Telegram auth response:",r)}catch(e){console.error("Telegram auth error:",e)}};let r=(n||"").replace(/^@/,""),i=document.createElement("script");return i.src="https://telegram.org/js/telegram-widget.js?22",i.async=!0,i.setAttribute("data-telegram-login",r),i.setAttribute("data-request-access","write"),i.setAttribute("data-onauth","TelegramOnAuthCb(user)"),i.setAttribute("data-lang","ru"),i.setAttribute("data-size","medium"),null==(e=t.current)||e.appendChild(i),()=>{var e;null==(e=t.current)||e.removeChild(i),window.TelegramOnAuthCb=void 0}},[n,a]),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)("div",{ref:t})})},c=a.Ay.div.withConfig({displayName:"OAuthBtns__Wrapper",componentId:"sc-b9498d85-0"})(["width:100%;"]),p=a.Ay.div.withConfig({displayName:"OAuthBtns__WrapperOr",componentId:"sc-b9498d85-1"})(["display:flex;align-items:center;justify-content:space-between;gap:11px;width:100%;p{font-size:20px;font-family:var(--font-manrope),serif;color:",";margin-bottom:8px;width:50%;}hr{width:100%;height:.5px;background-color:",";}"],o.hk,o.hk),l=a.Ay.div.withConfig({displayName:"OAuthBtns__WrapperButtons",componentId:"sc-b9498d85-2"})(["margin-top:16px;display:flex;justify-content:center;align-items:center;gap:20px;"]);a.Ay.button.withConfig({displayName:"OAuthBtns__Button",componentId:"sc-b9498d85-3"})(["width:160px;height:44px;border-radius:6px;background-color:",";img{user-drag:none;-webkit-user-drag:none;}"],o.tb);let u=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=document.createElement("script");e.src="https://unpkg.com/@vkid/sdk@2.4.0/dist-sdk/umd/index.js",e.async=!0,e.onload=()=>{t(!0),console.log("VK SDK загружен")},e.onerror=()=>{console.error("Не удалось загрузить VK SDK")},document.body.appendChild(e)},[]),(0,i.useEffect)(()=>{if(!e||!window.VKIDSDK)return;let t=window.VKIDSDK,n="https://neurotinnitus.ru";t.Config.init({app:0x338ffd7,redirectUrl:n,responseMode:t.ConfigResponseMode.Callback,source:t.ConfigSource.LOWCODE,scope:"email phone"}),new t.OneTap().render({container:document.getElementById("vk-id-container"),skin:"secondary",styles:{borderRadius:10,height:40,width:200}}).on(t.WidgetEvents.ERROR,e=>console.error("VK Ошибка входа",e)).on(t.OneTapInternalEvents.LOGIN_SUCCESS,async e=>{console.log("VK payload:",e);let{code:r,device_id:i}=e;if(!r||!i)return void console.error("Пустой code или device_id",e);try{if(t.Auth&&"function"==typeof t.Auth.exchangeCode){let e=await t.Auth.exchangeCode(r,i);console.log("Client-side token:",e);let n=await t.Auth.userInfo(e.access_token);console.log(n);try{await s.A.csrf()}catch(e){}await s.A.authVk({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,user_id:e.user_id,scope:e.scope,email:e.email||""});return}}catch(e){console.error("VK exchangeCode error:",e)}try{let e=await s.A.authVk({code:r,device_id:i,redirect_uri:n});console.log("Server-side auth result:",e)}catch(e){var a;console.error("Server-side VK auth error:",(null==(a=e.response)?void 0:a.data)||e)}})},[e]),(0,r.jsxs)(c,{children:[(0,r.jsxs)(p,{children:[(0,r.jsx)("hr",{}),(0,r.jsx)("p",{children:"или"}),(0,r.jsx)("hr",{})]}),(0,r.jsxs)(l,{children:[(0,r.jsx)("div",{id:"vk-id-container",className:"btnAuth"}),(0,r.jsx)(d,{botName:"neurotinnitus_bot"})]})]})}},7476:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(5155);n(2115);var i=n(4987),a=n(6766),o=n(412),s=n(9909);n(904);let d=i.Ay.div.withConfig({displayName:"InputAuth__Field",componentId:"sc-a9a8b7c-0"})(["width:412px;display:flex;flex-direction:column;gap:6px;@media (max-width:500px){width:100%;}"]),c=i.Ay.div.withConfig({displayName:"InputAuth__Wrapper",componentId:"sc-a9a8b7c-1"})(["display:flex;justify-content:start;align-items:center;background-color:",";width:100%;padding:5px 6px;border-radius:6px;border:1px solid ",";.PhoneInput{width:100%;}.PhoneInputCountry{display:none;}img{user-drag:none;-webkit-user-drag:none;}input{font-family:var(--font-manrope),serif;font-size:20px;color:",";margin-left:5px;width:100%;background:transparent;outline:none;border:none;}@media (max-width:500px){padding:8px 6px;img{width:32px;}input{font-size:18px;}}@media (max-width:400px){padding:6px 6px;img{width:30px;}input{font-size:16px;}}"],o.tb,e=>e.$hasError?o.XK:"transparent",o.hk),p=i.Ay.div.withConfig({displayName:"InputAuth__ErrorText",componentId:"sc-a9a8b7c-2"})(["font-family:var(--font-manrope),serif;font-size:14px;color:",";margin-left:6px;margin-bottom:-4px;"],o.XK),l=e=>{let{image:t,label:n,value:i,onChange:o,type:l,error:u}=e;return(0,r.jsxs)(d,{children:[u&&(0,r.jsx)(p,{children:u}),(0,r.jsxs)(c,{$hasError:!!u,children:[(0,r.jsx)(a.default,{width:40,height:40,src:"/icons/auth/".concat(t,".svg"),alt:t}),"tel"===l?(0,r.jsx)(s.Ay,{placeholder:n,value:i,onChange:e=>{o(e||"")},defaultCountry:"RU"}):(0,r.jsx)("input",{placeholder:n,value:i,onChange:e=>o(e.target.value),type:l||"text",min:0})]})]})}},8652:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(5155),i=n(2115),a=n(4987),o=n(412);let s=a.Ay.div.withConfig({displayName:"WindowBlock__Wrapper",componentId:"sc-4d1b07a9-0"})(["background-color:",";z-index:10;position:relative;border-radius:25px;padding:44px 36px;display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%;transition:height .4s ease;h2{font-family:var(--font-montserrat);font-weight:800;font-size:32px;line-height:1;text-align:center;text-wrap:nowrap;}p{font-family:var(--font-manrope),serif;color:",";text-align:center;font-size:18px;&.description-start{width:620px;font-weight:400;}&.description-mini{font-size:16px;margin-top:16px;}a{color:",";position:relative;&::before{content:'';background-color:",";position:absolute;bottom:1px;left:0;width:100%;height:1px;}}}@media (max-width:700px){p{&.description-start{width:100%;}}}@media (max-width:550px){width:100vw;padding:32px 16px;h2{font-size:30px;}p{&.description-mini{font-size:14px;width:110%;margin-top:14px;}&.description-start{font-size:16px;}}}@media (max-width:400px){h2{font-size:28px;}p{&.description-mini{font-size:12px;margin-top:12px;width:120%;}&.description-start{font-size:14px;}}}"],o.vz,o.hk,o.eq,o.eq),d=e=>{let{children:t}=e;return 0===i.Children.count(t)?null:(0,r.jsx)(s,{className:"content",children:t})}}}]);