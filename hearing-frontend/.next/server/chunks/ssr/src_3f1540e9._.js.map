{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///var/www/Tinnus/hearing-frontend/src/components/UI/WindowBlock.tsx"],"sourcesContent":["import React, {Children} from 'react';\r\nimport styled from \"styled-components\";\r\nimport {primaryColor, textColor, whiteColor} from \"@/styles/colors\";\r\n\r\nconst Wrapper = styled.div`\r\n    background-color: ${whiteColor};\r\n    z-index: 10;\r\n    position: relative;\r\n    border-radius: 25px;\r\n    padding: 44px 36px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    height: 100%;\r\n    transition: height .4s ease;\r\n    h2{\r\n        font-family: var(--font-montserrat);\r\n        font-weight: 800;\r\n        font-size: 32px;\r\n        line-height: 1;\r\n        text-align: center;\r\n        text-wrap: nowrap;\r\n    }\r\n    p{\r\n        font-family: var(--font-manrope), serif;\r\n        color: ${textColor};\r\n        text-align: center;\r\n        font-size: 18px;\r\n        &.description-start{\r\n            width: 620px;\r\n            font-weight: 400;\r\n        }\r\n        &.description-mini{\r\n            font-size: 16px;\r\n            margin-top: 16px;\r\n        }\r\n        a{\r\n            color: ${primaryColor};\r\n            position: relative;\r\n            &::before{\r\n                content: '';\r\n                background-color: ${primaryColor};\r\n                position: absolute;\r\n                bottom: 1px;\r\n                left: 0;\r\n                width: 100%;\r\n                height: 1px;\r\n            }\r\n        }\r\n    }\r\n    @media (max-width: 700px) {\r\n        p{\r\n            &.description-start{\r\n                width: 100%;\r\n            }\r\n        }\r\n    }\r\n    @media (max-width: 550px) {\r\n        width: 100vw;\r\n        padding: 32px 16px;\r\n        h2{\r\n            font-size: 30px;\r\n        }\r\n        p{\r\n            &.description-mini{\r\n                font-size: 14px;\r\n                width: 110%;\r\n                margin-top: 14px;\r\n            }\r\n            &.description-start{\r\n                font-size: 16px;\r\n            }\r\n        }\r\n    }\r\n    @media (max-width: 400px) {\r\n        h2{\r\n            font-size: 28px;\r\n        }\r\n        p{\r\n            &.description-mini{\r\n                font-size: 12px;\r\n                margin-top: 12px;\r\n                width: 120%;\r\n            }\r\n            &.description-start{\r\n                font-size: 14px;\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nconst WindowBlock = ({children}: Readonly<{ children: React.ReactNode }>) => {\r\n    const isEmpty = Children.count(children) === 0;\r\n\r\n    if(isEmpty){\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Wrapper className={'content'}>\r\n            {children}\r\n        </Wrapper>\r\n    );\r\n};\r\n\r\nexport default WindowBlock;"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,UAAU,2KAAA,CAAA,UAAM,CAAC,GAAG;;;EAAA,CAAC;sBACL,EAAE,uHAAA,CAAA,aAAU,CAAC;;;;;;;;;;;;;;;;;;;;;eAqBpB,EAAE,uHAAA,CAAA,YAAS,CAAC;;;;;;;;;;;;mBAYR,EAAE,uHAAA,CAAA,eAAY,CAAC;;;;kCAIA,EAAE,uHAAA,CAAA,eAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDjD,CAAC;AAED,MAAM,cAAc,CAAC,EAAC,QAAQ,EAA0C;IACpE,MAAM,UAAU,qMAAA,CAAA,WAAQ,CAAC,KAAK,CAAC,cAAc;IAE7C,IAAG,SAAQ;QACP,OAAO;IACX;IAEA,qBACI,8OAAC;QAAQ,WAAW;kBACf;;;;;;AAGb;uCAEe","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///var/www/Tinnus/hearing-frontend/src/app/%28auth%29/page.styled.ts"],"sourcesContent":["import styled from \"styled-components\";\r\nimport {primaryColor, redColor, whiteColor} from \"@/styles/colors\";\r\n\r\nexport const BackgroundPage = styled.section`\r\n    min-height: 100vh;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    position: relative;\r\n    padding: 24px;\r\n    z-index: 10;\r\n    .content {\r\n        animation: fadeInUp 400ms ease-out both;\r\n    }\r\n\r\n    @keyframes fadeInUp {\r\n        from { opacity: 0; transform: translateY(16px) scale(0.9); }\r\n        to { opacity: 1; transform: translateY(0) scale(1); }\r\n    }\r\n    @media (max-width: 500px) {\r\n        padding: 0;\r\n    }}\r\n`\r\n\r\nexport const AuthForm = styled.form`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    gap: 14px;\r\n    margin: 24px 0;\r\n    z-index: 20;\r\n    width: 100%;\r\n    button{\r\n        margin-top: 28px;\r\n        background-color: ${primaryColor};\r\n        font-size: 24px;\r\n        font-family: var(--font-manrope), serif;\r\n        color: ${whiteColor};\r\n        height: 50px;\r\n        border-radius: 6px;\r\n        width: 100%;\r\n    }\r\n    @media (max-width: 500px) {\r\n        margin: 12px 0;\r\n        button{\r\n            height: 45px;\r\n            font-size: 20px;\r\n            margin-top: 14px;\r\n        }\r\n    }\r\n\r\n`\r\nexport const ContentBlock = styled.div`\r\n    position: relative;\r\n`\r\nexport const OtherErrors = styled.div<{$message: string | undefined}>`\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    width: 100%;\r\n    height: ${({$message})=> $message ? \"114%\" : \"100%\"};\r\n    opacity: ${({$message})=> $message ? 1 : 0};\r\n    background-color: ${redColor};\r\n    border-radius: 25px;\r\n    z-index: 1;\r\n    transition: .4s;\r\n    \r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: end;\r\n    padding: 4.5%;\r\n\r\n    font-family: var(--font-manrope), serif;\r\n    font-weight: 500;\r\n    font-size: 24px;\r\n    color: ${whiteColor};\r\n    @media (max-width: 500px) {\r\n        font-size: 20px;\r\n        height: ${({$message})=> $message ? \"112%\" : \"100%\"};\r\n        padding: 3.2%;\r\n    }\r\n    @media (max-width: 400px) {\r\n        padding: 3.2%;\r\n    }\r\n    @media (max-width: 320px) {\r\n        padding: 4%;\r\n    }\r\n`\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,iBAAiB,2KAAA,CAAA,UAAM,CAAC,OAAO;;;EAAA,CAAC;;;;;;;;;;;;;;;;;;;AAmB7C,CAAC;AAEM,MAAM,WAAW,2KAAA,CAAA,UAAM,CAAC,IAAI;;;EAAA,CAAC;;;;;;;;;;;0BAWV,EAAE,uHAAA,CAAA,eAAY,CAAC;;;eAG1B,EAAE,uHAAA,CAAA,aAAU,CAAC;;;;;;;;;;;;;;AAc5B,CAAC;AACM,MAAM,eAAe,2KAAA,CAAA,UAAM,CAAC,GAAG;;;EAAA,CAAC;;AAEvC,CAAC;AACM,MAAM,cAAc,2KAAA,CAAA,UAAM,CAAC,GAAG;;;EAAgC,CAAC;;;;;YAK1D,EAAE,CAAC,EAAC,QAAQ,EAAC,GAAI,WAAW,SAAS,OAAO;aAC3C,EAAE,CAAC,EAAC,QAAQ,EAAC,GAAI,WAAW,IAAI,EAAE;sBACzB,EAAE,uHAAA,CAAA,WAAQ,CAAC;;;;;;;;;;;;;WAatB,EAAE,uHAAA,CAAA,aAAU,CAAC;;;gBAGR,EAAE,CAAC,EAAC,QAAQ,EAAC,GAAI,WAAW,SAAS,OAAO;;;;;;;;;AAS5D,CAAC","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///var/www/Tinnus/hearing-frontend/src/components/UI/Auth/InputAuth.tsx"],"sourcesContent":["import React from 'react';\r\nimport styled from \"styled-components\";\r\nimport Image from \"next/image\";\r\nimport {lightGrayColor, redColor, textColor} from \"@/styles/colors\";\r\nimport PhoneInput from 'react-phone-number-input';\r\nimport 'react-phone-number-input/style.css';\r\nimport {E164Number} from \"libphonenumber-js\";\r\n\r\ninterface IProps {\r\n    image: string;\r\n    label: string;\r\n    value: string;\r\n    type?: string;\r\n    onChange: (value: string) => void;\r\n    error?: string;\r\n}\r\n\r\nconst Field = styled.div`\r\n    width: 412px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 6px;\r\n    @media (max-width: 500px) {\r\n        width: 100%;\r\n    }\r\n`\r\n\r\nconst Wrapper = styled.div<{ $hasError?: boolean }>`\r\n    display: flex;\r\n    justify-content: start;\r\n    align-items: center;\r\n    background-color: ${lightGrayColor};\r\n    width: 100%;\r\n    padding: 5px 6px;\r\n    border-radius: 6px;\r\n    border: 1px solid ${props => props.$hasError ? redColor : 'transparent'};\r\n    \r\n    .PhoneInput{\r\n        width: 100%;\r\n    }\r\n    .PhoneInputCountry{\r\n        display: none;\r\n    }\r\n    \r\n    img{\r\n        user-drag: none;\r\n        -webkit-user-drag: none;\r\n    }\r\n    input{\r\n        font-family: var(--font-manrope), serif;\r\n        font-size: 20px;\r\n        color: ${textColor};\r\n        margin-left: 5px;\r\n        width: 100%;\r\n        background: transparent;\r\n        outline: none;\r\n        border: none;\r\n    }\r\n    @media (max-width: 500px) {\r\n        padding: 8px 6px;\r\n        img{\r\n            width: 32px;\r\n        }\r\n        input{\r\n            font-size: 18px;\r\n        }\r\n    }\r\n    @media (max-width: 400px) {\r\n        padding: 6px 6px;\r\n        img{\r\n            width: 30px;\r\n        }\r\n        input{\r\n            font-size: 16px;\r\n        }\r\n    }\r\n`\r\n\r\nconst ErrorText = styled.div`\r\n    font-family: var(--font-manrope), serif;\r\n    font-size: 14px;\r\n    color: ${redColor};\r\n    margin-left: 6px;\r\n    margin-bottom: -4px;\r\n`\r\n\r\nconst InputAuth = ({image, label, value, onChange, type, error}:IProps) => {\r\n\r\n    const handlePhoneChange = (phoneValue: E164Number | undefined) => {\r\n        onChange(phoneValue || '');\r\n    };\r\n\r\n    return (\r\n        <Field>\r\n            {error && <ErrorText>{error}</ErrorText>}\r\n            <Wrapper $hasError={Boolean(error)}>\r\n                <Image width={40} height={40} src={`/icons/auth/${image}.svg`} alt={image} />\r\n                {type === 'tel' ?\r\n                    <PhoneInput\r\n                        placeholder={label}\r\n                        value={value}\r\n                        onChange={handlePhoneChange}\r\n                        defaultCountry=\"RU\"\r\n                    />\r\n                    :\r\n                    <input\r\n                        placeholder={label}\r\n                        value={value}\r\n                        onChange={(e) => onChange(e.target.value)}\r\n                        type={type ? type : 'text'}\r\n                        min={0}\r\n                    />\r\n                }\r\n            </Wrapper>\r\n        </Field>\r\n    );\r\n};\r\n\r\nexport default InputAuth;"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;;;;;AAaA,MAAM,QAAQ,2KAAA,CAAA,UAAM,CAAC,GAAG;;;EAAA,CAAC;;;;;;;;AAQzB,CAAC;AAED,MAAM,UAAU,2KAAA,CAAA,UAAM,CAAC,GAAG;;;EAAyB,CAAC;;;;sBAI9B,EAAE,uHAAA,CAAA,iBAAc,CAAC;;;;sBAIjB,EAAE,CAAA,QAAS,MAAM,SAAS,GAAG,uHAAA,CAAA,WAAQ,GAAG,cAAc;;;;;;;;;;;;;;;;eAgB7D,EAAE,uHAAA,CAAA,YAAS,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB3B,CAAC;AAED,MAAM,YAAY,2KAAA,CAAA,UAAM,CAAC,GAAG;;;EAAA,CAAC;;;WAGlB,EAAE,uHAAA,CAAA,WAAQ,CAAC;;;AAGtB,CAAC;AAED,MAAM,YAAY,CAAC,EAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAQ;IAElE,MAAM,oBAAoB,CAAC;QACvB,SAAS,cAAc;IAC3B;IAEA,qBACI,8OAAC;;YACI,uBAAS,8OAAC;0BAAW;;;;;;0BACtB,8OAAC;gBAAQ,WAAW,QAAQ;;kCACxB,8OAAC,6HAAA,CAAA,UAAK;wBAAC,OAAO;wBAAI,QAAQ;wBAAI,KAAK,CAAC,YAAY,EAAE,MAAM,IAAI,CAAC;wBAAE,KAAK;;;;;;oBACnE,SAAS,sBACN,8OAAC,iKAAA,CAAA,UAAU;wBACP,aAAa;wBACb,OAAO;wBACP,UAAU;wBACV,gBAAe;;;;;iFAGnB,8OAAC;wBACG,aAAa;wBACb,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,MAAM,OAAO,OAAO;wBACpB,KAAK;;;;;;;;;;;;;;;;;;AAM7B;uCAEe","debugId":null}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///var/www/Tinnus/hearing-frontend/src/components/UI/Auth/TgBtn.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport styled from \"styled-components\";\nimport Image from \"next/image\";\nimport { lightGrayColor } from \"@/styles/colors\";\nimport { TelegramIcon } from '../TelegramIcon';\nimport { NetworkService } from '@/api/request';\n\nexport type TGUser = {\n  id: number;\n  username?: string;\n  photo_url?: string;\n  first_name: string;\n  last_name?: string;\n  auth_date: number;\n  hash: string;\n};\n\ntype Props = {\n  botName: string;\n  onAuthCallback?: (user: TGUser) => void;\n};\n\nconst Button = styled.button`\n    width: 160px;\n    height: 44px;\n    border-radius: 6px;\n    background-color: ${lightGrayColor};\n    \n    img {\n        user-drag: none;\n        -webkit-user-drag: none;\n    }\n`;\n\nexport const TelegramLoginButton = (props: Props) => {\n  const _containerRef = useRef<HTMLDivElement | null>(null);\n  const { botName, onAuthCallback } = props;\n\n  useEffect(() => {\n    function getCookie(name: string): string | null {\n      const matches = typeof document !== 'undefined' ? document.cookie.match(new RegExp('(?:^|; )' + name.replace(/([.$?*|{}()\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')) : null;\n      return matches ? decodeURIComponent(matches[1]) : null;\n    }\n\n    (window as any).TelegramOnAuthCb = async (user: TGUser) => {\n      try {\n        if (onAuthCallback) onAuthCallback(user);\n        await NetworkService.csrf();\n        const csrftoken = getCookie('csrftoken') || '';\n        const res = await fetch('/api/auth/telegram/', {\n          method: 'POST',\n          headers: {\n            'X-CSRFToken': csrftoken,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n          },\n          credentials: 'include',\n          body: JSON.stringify(user),\n        });\n        const data = await res.json().catch(() => ({}));\n        console.log('Telegram auth response:', data);\n      } catch (e) {\n        console.error('Telegram auth error:', e);\n      }\n    };\n\n    const loginName = (botName || '').replace(/^@/, '');\n\n    const script = document.createElement('script');\n    script.src = 'https://telegram.org/js/telegram-widget.js?22';\n    script.async = true;\n\n    script.setAttribute('data-telegram-login', loginName);\n    script.setAttribute('data-request-access', 'write');\n    script.setAttribute('data-onauth', 'TelegramOnAuthCb(user)');\n    script.setAttribute('data-lang', 'ru');\n    script.setAttribute('data-size', 'medium');\n\n    _containerRef.current?.appendChild(script);\n\n    return () => {\n      _containerRef.current?.removeChild(script);\n      (window as any).TelegramOnAuthCb = undefined;\n    };\n  }, [botName, onAuthCallback]);\n\n  return (\n    <div style={{ display: 'flex', justifyContent: 'center' }}>\n      <div ref={_containerRef} />\n    </div>\n  );\n};"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AAEA;;;;;;AAiBA,MAAM,SAAS,2KAAA,CAAA,UAAM,CAAC,MAAM;;;EAAA,CAAC;;;;sBAIP,EAAE,uHAAA,CAAA,iBAAc,CAAC;;;;;;AAMvC,CAAC;AAEM,MAAM,sBAAsB,CAAC;IAClC,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAyB;IACpD,MAAM,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG;IAEpC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,SAAS,UAAU,IAAY;YAC7B,MAAM,UAAU,OAAO,aAAa,cAAc,SAAS,MAAM,CAAC,KAAK,CAAC,IAAI,OAAO,aAAa,KAAK,OAAO,CAAC,6BAA6B,UAAU,eAAe;YACnK,OAAO,UAAU,mBAAmB,OAAO,CAAC,EAAE,IAAI;QACpD;QAEC,OAAe,gBAAgB,GAAG,OAAO;YACxC,IAAI;gBACF,IAAI,gBAAgB,eAAe;gBACnC,MAAM,qHAAA,CAAA,iBAAc,CAAC,IAAI;gBACzB,MAAM,YAAY,UAAU,gBAAgB;gBAC5C,MAAM,MAAM,MAAM,MAAM,uBAAuB;oBAC7C,QAAQ;oBACR,SAAS;wBACP,eAAe;wBACf,gBAAgB;wBAChB,UAAU;oBACZ;oBACA,aAAa;oBACb,MAAM,KAAK,SAAS,CAAC;gBACvB;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;gBAC7C,QAAQ,GAAG,CAAC,2BAA2B;YACzC,EAAE,OAAO,GAAG;gBACV,QAAQ,KAAK,CAAC,wBAAwB;YACxC;QACF;QAEA,MAAM,YAAY,CAAC,WAAW,EAAE,EAAE,OAAO,CAAC,MAAM;QAEhD,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,OAAO,GAAG,GAAG;QACb,OAAO,KAAK,GAAG;QAEf,OAAO,YAAY,CAAC,uBAAuB;QAC3C,OAAO,YAAY,CAAC,uBAAuB;QAC3C,OAAO,YAAY,CAAC,eAAe;QACnC,OAAO,YAAY,CAAC,aAAa;QACjC,OAAO,YAAY,CAAC,aAAa;QAEjC,cAAc,OAAO,EAAE,YAAY;QAEnC,OAAO;YACL,cAAc,OAAO,EAAE,YAAY;YAClC,OAAe,gBAAgB,GAAG;QACrC;IACF,GAAG;QAAC;QAAS;KAAe;IAE5B,qBACE,8OAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,gBAAgB;QAAS;kBACtD,cAAA,8OAAC;YAAI,KAAK;;;;;;;;;;;AAGhB","debugId":null}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":["file:///var/www/Tinnus/hearing-frontend/src/components/UI/Auth/OAuthBtns.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styled from \"styled-components\";\nimport Image from \"next/image\";\nimport { lightGrayColor, textColor } from \"@/styles/colors\";\n\nimport { NetworkService } from '@/api/request';\nimport { TelegramLoginButton } from './TgBtn';\n\nconst Wrapper = styled.div`\n    width: 100%;\n`;\n\nconst WrapperOr = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 11px;\n    width: 100%;\n    p {\n        font-size: 20px;\n        font-family: var(--font-manrope), serif;\n        color: ${textColor};\n        margin-bottom: 8px;\n        width: 50%;\n    }\n    hr {\n        width: 100%;\n        height: .5px;\n        background-color: ${textColor};\n    }\n`;\n\nconst WrapperButtons = styled.div`\n    margin-top: 16px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 20px;\n`;\n\nconst Button = styled.button`\n    width: 160px;\n    height: 44px;\n    border-radius: 6px;\n    background-color: ${lightGrayColor};\n    \n    img {\n        user-drag: none;\n        -webkit-user-drag: none;\n    }\n`;\n\nconst OAuthBtns = () => {\n    const [isSdkLoaded, setIsSdkLoaded] = useState(false);\n\n    useEffect(() => {\n        // Программно загружаем скрипт SDK\n        const script = document.createElement('script');\n        // Пин к стабильной версии SDK VK ID\n        script.src = \"https://unpkg.com/@vkid/sdk@2.4.0/dist-sdk/umd/index.js\";\n        script.async = true;\n        script.onload = () => {\n            setIsSdkLoaded(true);  // Устанавливаем состояние, что SDK загружен\n            console.log(\"VK SDK загружен\");\n        };\n        script.onerror = () => {\n            console.error(\"Не удалось загрузить VK SDK\");\n        };\n        document.body.appendChild(script);\n    }, []);\n\n    useEffect(() => {\n        if (!isSdkLoaded || !(window as any).VKIDSDK) return;\n\n        const VKID: any = (window as any).VKIDSDK;\n        const REDIRECT_URL = 'https://neurotinnitus.ru';\n\n        VKID.Config.init({\n            app: 54067159,\n            redirectUrl: REDIRECT_URL,\n            responseMode: VKID.ConfigResponseMode.Callback,\n            source: VKID.ConfigSource.LOWCODE,\n            scope: 'email phone',\n        });\n\n        const oneTap = new VKID.OneTap();\n\n        oneTap.render({\n            container: document.getElementById('vk-id-container'),\n            skin: 'secondary',\n            styles: { borderRadius: 10, height: 40, width: 200 },\n        })\n        .on(VKID.WidgetEvents.ERROR, (error) => console.error('VK Ошибка входа', error))\n        .on(VKID.OneTapInternalEvents.LOGIN_SUCCESS, async (payload: any) => {\n            console.log('VK payload:', payload);\n\n            const { code, device_id } = payload;\n            if (!code || !device_id) {\n                console.error('Пустой code или device_id', payload);\n                return;\n            }\n\n            // Попробуем client-side обмен кода\n            try {\n                if (VKID.Auth && typeof VKID.Auth.exchangeCode === 'function') {\n                    const tokenRes = await VKID.Auth.exchangeCode(code, device_id);\n                    console.log('Client-side token:', tokenRes);\n                    const dataBaba = await VKID.Auth.userInfo(tokenRes.access_token)\n                    console.log(dataBaba)\n                    try { await NetworkService.csrf(); } catch {}\n                    await NetworkService.authVk({\n                        access_token: tokenRes.access_token,\n                        id_token: tokenRes.id_token,\n                        refresh_token: tokenRes.refresh_token,\n                        user_id: tokenRes.user_id,\n                        scope: tokenRes.scope,\n                        email: tokenRes.email || '',\n                    });\n                    return;\n                }\n            } catch (err) {\n                console.error('VK exchangeCode error:', err);\n            }\n\n            // Server-side fallback\n            try {\n                const res = await NetworkService.authVk({\n                    code,\n                    device_id,\n                    redirect_uri: REDIRECT_URL,\n                });\n                console.log('Server-side auth result:', res);\n            } catch (err) {\n                console.error('Server-side VK auth error:', err.response?.data || err);\n            }\n        });\n    }, [isSdkLoaded]);\n\n\n    return (\n        <Wrapper>\n\n            <WrapperOr>\n                <hr />\n                <p>или</p>\n                <hr />\n            </WrapperOr>\n            <WrapperButtons>\n                    <div id=\"vk-id-container\" className='btnAuth'></div>\n                <TelegramLoginButton botName='neurotinnitus_bot' />\n            </WrapperButtons>\n            \n        </Wrapper>\n    );\n};\n\nexport default OAuthBtns;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 696, "column": 0}, "map": {"version":3,"sources":["file:///var/www/Tinnus/hearing-frontend/src/app/%28auth%29/register/page.tsx"],"sourcesContent":["'use client'\n\nimport Link from \"next/link\";\nimport WindowBlock from \"@/components/UI/WindowBlock\";\nimport {AuthForm, BackgroundPage} from \"@/app/(auth)/page.styled\";\nimport InputAuth from \"@/components/UI/Auth/InputAuth\";\nimport {FormEvent, useEffect, useState} from \"react\";\nimport OAuthBtns from \"@/components/UI/Auth/OAuthBtns\";\nimport {NetworkService} from \"@/api/request\";\nimport {useRouter} from \"next/navigation\";\n\n\n\n\nexport default function RegisterPage() {\n    const [name, setName] = useState('');\n    const [age, setAge] = useState('');\n    const [phone, setPhone] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [errors, setErrors] = useState<{ [key: string]: string } | null>(null);\n    const router = useRouter();\n\n    //Проверка на авторизацию\n    useEffect(() => {\n        const fetchAuth = async () =>{\n            const res = await NetworkService.isAuth();\n            if(res.status === 200){\n                router.push('/tests')\n            }else{\n                return;\n            }\n        }\n        fetchAuth()\n    }, []);\n\n    // Регистрируем\n    const register = async (e: FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setErrors(null)\n        try {\n            await NetworkService.csrf();\n            const res = await NetworkService.register({\n                user: {\n                    email: email,\n                    password: password\n                },\n                full_name: name,\n                age: age,\n                phone: phone,\n            });\n            if (res.status === 400) {\n                const parsedErrors = res.data;\n                setErrors({\n                    email: parsedErrors.user.email ? parsedErrors.user.email[0] : '',\n                    full_name: parsedErrors.full_name ? parsedErrors.full_name[0] : '',\n                    age: parsedErrors.age ? parsedErrors.age[0] : '',\n                    phone: parsedErrors.phone ? parsedErrors.phone[0] : '',\n                    password: parsedErrors.user.password ? parsedErrors.user.password[0] : '',\n                    detail: parsedErrors.detail ? parsedErrors.detail : ''\n                });\n                console.log(parsedErrors);\n            }\n            if (res.status === 201) {\n                const res = await NetworkService.login({\n                    email: email,\n                    password: password\n                });\n                if(res.status === 200){\n                    window.location.href = \"/start\";\n                }\n            }\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    return (\n        <BackgroundPage>\n            <WindowBlock>\n\n                <h2>Регистрация</h2>\n\n                <p className={'description-mini'}>\n                    Пожалуйста, заполните форму для создания аккаунта.<br/>\n                    Если у вас есть аккаунт, <Link href={'/login'}>войдите</Link>.\n                </p>\n\n                <AuthForm onSubmit={register}>\n                    <InputAuth\n                        image={'user'}\n                        label={'ФИО'}\n                        value={name}\n                        error={errors?.full_name}\n                        onChange={setName}\n                    />\n                    <InputAuth\n                        image={'calendar'}\n                        label={'Возраст'}\n                        value={age}\n                        type={'number'}\n                        error={errors?.age}\n                        onChange={setAge}\n                    />\n                    <InputAuth\n                        image={'phone'}\n                        label={'Номер телефона'}\n                        value={phone}\n                        type={'tel'}\n                        error={errors?.phone}\n                        onChange={setPhone}\n                    />\n                    <InputAuth\n                        image={'mail'}\n                        label={'Email'}\n                        value={email}\n                        type={'email'}\n                        error={errors?.email}\n                        onChange={setEmail}\n                    />\n                    <InputAuth\n                        image={'lock'}\n                        label={'Пароль'}\n                        value={password}\n                        type={'password'}\n                        error={errors?.password}\n                        onChange={setPassword}\n                    />\n                    <button type={\"submit\"}>Зарегистрироваться</button>\n                </AuthForm>\n                \n\n                <OAuthBtns />\n\n            </WindowBlock>\n        </BackgroundPage>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}