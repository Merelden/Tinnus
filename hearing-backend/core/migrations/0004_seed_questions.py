from django.db import migrations


def seed_questions(apps, schema_editor):
    Question = apps.get_model('core', 'Question')
    QuestionOption = apps.get_model('core', 'QuestionOption')

    QUESTIONS = [
        {
            "id": 1,
            "question": "С чем вы связываете появление ушного шума?",
            "type": "multiple",
            "options": [
                {"label": "акустическая травма"},
                {"label": "механическая травма"},
                {"label": "стресс"},
                {"label": "переутомление"},
                {"label": "прием препаратов (укажите каких в следующем окне)"},
                {"label": "заболевание уха (укажите какие в следующем окне)"},
                {"label": "общие заболевания (укажите какие в следующем окне)"},
                {"label": "другое (укажите в следующем окне)"}
            ],
            "input": "Добавьте информацию, связанную с появлением ушного шума, если это необходимо"
        },
        {
            "id": 2,
            "question": "Ушной шум ощущается:",
            "type": "single",
            "options": [
                {"label": "всегда в правом ухе"},
                {"label": "всегда в левом ухе"},
                {"label": "не каждый день"},
                {"label": "в голове"}
            ]
        },
        {
            "id": 3,
            "question": "Ушной шум ощущается:",
            "type": "single",
            "options": [
                {"label": "только в тишине"},
                {"label": "и в тишине, и в шуме (при разговоре)"}
            ],
            "input": "Добавьте информацию о том, что влияет на ушной шум, если это необходимо"
        },
        {
            "id": 4,
            "question": "Характер шума",
            "type": "single",
            "options": [
                {"label": "постоянный"},
                {"label": "пульсирующий"},
                {"label": "прерывистый"}
            ],
            "input": "Добавьте информацию о том, как сильно шумит в ушах, если это необходимо"
        },
        {
            "id": 5,
            "question": "Какие факторы усиливают или вызывают появление шума?",
            "type": "multiple",
            "options": [
                {"label": "эмоциональный стресс"},
                {"label": "физическая нагрузка"},
                {"label": "переутомление, дефицит сна"},
                {"label": "прием алкоголя"},
                {"label": "нахождение в тишине"},
                {"label": "опредленное время суток"},
                {"label": "фазы менструального цикла"},
                {"label": "обострения хронических заболеваний (укажите каких далее)"},
                {"label": "другое (укажите далее)"}
            ],
            "input": "Добавьте информацию о том, как сильно шумит в ушах, если это необходимо"
        },
        {
            "id": 6,
            "question": "Ушной шум ощущается:",
            "type": "single",
            "options": [
                {"label": "сразу после начала работы"},
                {"label": "через несколько часов после начала работы"},
                {"label": "иногда в течение дня"},
                {"label": "во время отдыха"}
            ]
        },
        {
            "id": 7,
            "question": "Ушной шум ощущается:",
            "type": "single",
            "options": [
                {"label": "только в тишине"},
                {"label": "и в тишине, и в шуме (при разговоре)"}
            ],
            "input": "Добавьте информацию о том, как сильно шумит в ушах, если это необходимо"
        },
        {
            "id": 8,
            "question": "Характер шума",
            "type": "single",
            "options": [
                {"label": "постоянный"},
                {"label": "пульсирующий"},
                {"label": "прерывистый"}
            ],
            "input": "Добавьте информацию о том, как сильно шумит в ушах, если это необходимо"
        },
        {
            "id": 9,
            "question": "Какие факторы усиливают или вызывают появление шума?",
            "type": "multiple",
            "options": [
                {"label": "эмоциональный стресс"},
                {"label": "физическая нагрузка"},
                {"label": "переутомление, дефицит сна"},
                {"label": "прием алкоголя"},
                {"label": "нахождение в тишине"},
                {"label": "опредленное время суток"},
                {"label": "фазы менструального цикла"},
                {"label": "обострения хронических заболеваний (укажите какие далее)"},
                {"label": "другое (укажите далее)"}
            ],
            "input": "Добавьте информацию о том, как сильно шумит в ушах, если это необходимо"
        },
        {
            "id": 10,
            "question": "Я почитаю о том, насколько сильно у меня шумит в ушах",
            "type": "single",
            "options": [
                {"label": "прослушивание музыки, нахождение в шуме"},
                {"label": "прием алкоголя"},
                {"label": "отдых, пребывание на природе, сон"},
                {"label": "прием препаратов (укажите какие далее)"},
                {"label": "другое (укажите далее)"}
            ],
            "input": "Добавьте информацию о том, как сильно шумит в ушах, если это необходимо"
        },
        {
            "id": 11,
            "question": "Каким негативным эффектам приводит ушной шум?",
            "type": "single",
            "options": [
                {"label": "нарушение сна"},
                {"label": "тревога"},
                {"label": "подавленное настроение, депрессия"},
                {"label": "снижение концентрации внимания"},
                {"label": "стресс"},
                {"label": "возбуждение"},
                {"label": "другое (укажите далее)"}
            ],
            "input": "Добавьте информацию о том, как сильно шумит в ушах, если это необходимо"
        },
        {
            "id": 12,
            "question": "Обладались ли вы за психологической помощью?",
            "type": "single",
            "options": [
                {"label": "Да"},
                {"label": "Нет"}
            ]
        },
        {
            "id": 13,
            "question": "Готовы ли вы регулярно обращаться за помощью психолога или психотерапевта в формате очных консультаций для лечения ушного шума?",
            "type": "single",
            "options": [
                {"label": "Да"},
                {"label": "Нет"}
            ]
        },
        {
            "id": 14,
            "question": "Готовы ли вы с��мостоятельно выполнять упражнения для снижения проявлений ушного шума на постоянной основе в домашних условиях?",
            "type": "single",
            "options": [
                {"label": "Да"},
                {"label": "Нет"}
            ]
        },
        # Новый раздел 1 (вопросы 15-21)
        {
            "id": 15,
            "question": "Я испытываю напряжение, мне не по себе",
            "type": "single",
            "options": [
                {"label": "все время (3)"},
                {"label": "часто (2)"},
                {"label": "время от времени, иногда (1)"},
                {"label": "совсем не испытываю (0)"}
            ]
        },
        {
            "id": 16,
            "question": "Я испытываю страх, кажется, что что-то ужасное вот-вот случиться",
            "type": "single",
            "options": [
                {"label": "опредленно, это так, и страх очень велик (3)"},
                {"label": "да, это так, но страх не очень велик (2)"},
                {"label": "иногда, но это меня не беспокоит (1)"},
                {"label": "совсем не испытываю (0)"}
            ]
        },
        {
            "id": 17,
            "question": "Беспокойные мысли крутятся у меня в голове",
            "type": "single",
            "options": [
                {"label": "постоянно (3)"},
                {"label": "большую часть времени (2)"},
                {"label": "время от времени и не так часто (1)"},
                {"label": "только иногда (0)"}
            ]
        },
        {
            "id": 18,
            "question": "Я легко могу присесть и расслабиться",
            "type": "single",
            "options": [
                {"label": "опредленно, это так (0)"},
                {"label": "наверное, это так (1)"},
                {"label": "лишь изредка, это так (2)"},
                {"label": "совсем не могу (3)"}
            ]
        },
        {
            "id": 19,
            "question": "Я испытываю внутреннее напряжение или дрожь",
            "type": "single",
            "options": [
                {"label": "совсем не испытываю (0)"},
                {"label": "иногда (1)"},
                {"label": "часто (2)"},
                {"label": "очень часто (3)"}
            ]
        },
        {
            "id": 20,
            "question": "Я испытываю неусидчивость, мне постоянно нужно двигаться",
            "type": "single",
            "options": [
                {"label": "определенно, это так (3)"},
                {"label": "наверное, это так (2)"},
                {"label": "лишь в некоторой степени, это так (1)"},
                {"label": "совсем не испытываю (0)"}
            ]
        },
        {
            "id": 21,
            "question": "У меня бывает внезапное чувство паники",
            "type": "single",
            "options": [
                {"label": "очень часто (3)"},
                {"label": "довольно часто (2)"},
                {"label": "не так уж и часто (1)"},
                {"label": "совсем не бывает (0)"}
            ]
        },
        # Новый раздел 2 (вопросы 22-28)
        {
            "id": 22,
            "question": "То, что приносило мне большое удовольствие, и сейчас вызывает у меня такое же чувство",
            "type": "single",
            "options": [
                {"label": "определенно, это так (0)"},
                {"label": "наверное, это так (1)"},
                {"label": "лишь в очень малой степени, это так (2)"},
                {"label": "это совсем не так (3)"}
            ]
        },
        {
            "id": 23,
            "question": "Я способен рассмеяться и увидеть в том или ином событии смешное",
            "type": "single",
            "options": [
                {"label": "определенно, это так (0)"},
                {"label": "наверное, это так (1)"},
                {"label": "лишь в очень малой степени, это так (2)"},
                {"label": "это совсем не так (3)"}
            ]
        },
        {
            "id": 24,
            "question": "Я испытываю бодрость",
            "type": "single",
            "options": [
                {"label": "совсем не испытываю (3)"},
                {"label": "очень редко (2)"},
                {"label": "иногда (1)"},
                {"label": "практически все время (0)"}
            ]
        },
        {
            "id": 25,
            "question": "Мне кажется, что я стал все делать очень медленно",
            "type": "single",
            "options": [
                {"label": "практически все время (3)"},
                {"label": "часто (2)"},
                {"label": "иногда (1)"},
                {"label": "совсем нет (0)"}
            ]
        },
        {
            "id": 26,
            "question": "Я не слежу за своей внешностью",
            "type": "single",
            "options": [
                {"label": "определенно, это так (3)"},
                {"label": "я не уделяю этому столько времени, сколько нужно (2)"},
                {"label": "может быть, я стал меньше уделять этому времени (1)"},
                {"label": "я слежу за собой так же, как и раньше (0)"}
            ]
        },
        {
            "id": 27,
            "question": "Я считаю, что мои дела (занятия, увлечения) могут принести мне чувство удовлетворения",
            "type": "single",
            "options": [
                {"label": "точно так же, как и обычно (0)"},
                {"label": "да, но не в той степени, как раньше (1)"},
                {"label": "значительно меньше, чем обычно (2)"},
                {"label": "совсем так не считаю (3)"}
            ]
        },
        {
            "id": 28,
            "question": "Я могу получать удовольствие от хорошей книги, радио - или телепрограммы",
            "type": "single",
            "options": [
                {"label": "часто (0)"},
                {"label": "иногда (1)"},
                {"label": "редко (2)"},
                {"label": "очень редко (3)"}
            ]
        }
    ]

    # Глобально уникальные ID для вариантов ответов
    option_id = 1

    for q in QUESTIONS:
        question = Question.objects.create(
            id=q.get('id'),
            text=q['question'],
            type=q['type'],
            input_text=q.get('input')
        )
        for idx, opt in enumerate(q.get('options', [])):
            QuestionOption.objects.create(
                id=option_id,
                question=question,
                label=opt['label'],
                order=idx
            )
            option_id += 1


def unseed_questions(apps, schema_editor):
    Question = apps.get_model('core', 'Question')
    QuestionOption = apps.get_model('core', 'QuestionOption')
    # Delete only seeded questions by IDs 1..28
    QuestionOption.objects.filter(question__id__in=list(range(1, 29))).delete()
    Question.objects.filter(id__in=list(range(1, 29))).delete()


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0003_question_questionoption'),
    ]

    operations = [
        migrations.RunPython(seed_questions, reverse_code=unseed_questions),
    ]
